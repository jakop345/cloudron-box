"use strict";var app=angular.module("Application",["ngRoute","ngAnimate","angular-md5"]);app.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/apps"}).when("/users",{controller:"UsersController",templateUrl:"views/users.html"}).when("/appstore",{controller:"AppStoreController",templateUrl:"views/appstore.html"}).when("/apps",{controller:"AppsController",templateUrl:"views/apps.html"}).when("/dns",{controller:"DnsController",templateUrl:"views/dns.html"}).when("/account",{controller:"AccountController",templateUrl:"views/account.html"}).when("/graphs",{controller:"GraphsController",templateUrl:"views/graphs.html"}).otherwise({redirectTo:"/"})}]);var ISTATES={ISTATE_PENDING_INSTALL:"pending_install",ISTATE_PENDING_CONFIGURE:"pending_configure",ISTATE_PENDING_UNINSTALL:"pending_uninstall",ISTATE_PENDING_RESTORE:"pending_restore",ISTATE_PENDING_UPDATE:"pending_update",ISTATE_ERROR:"error",ISTATE_INSTALLED:"installed"};app.filter("installationActive",function(){return function(e){return e===ISTATES.ISTATE_ERROR?!1:e===ISTATES.ISTATE_INSTALLED?!1:!0}}),app.filter("installationStateLabel",function(){return function(e){switch(e){case ISTATES.ISTATE_PENDING_INSTALL:return"Installing";case ISTATES.ISTATE_PENDING_CONFIGURE:return"Configuring";case ISTATES.ISTATE_PENDING_UNINSTALL:return"Uninstalling";case ISTATES.ISTATE_PENDING_RESTORE:return"Starting";case ISTATES.ISTATE_PENDING_UPDATE:return"Updating";case ISTATES.ISTATE_ERROR:return"Error";case ISTATES.ISTATE_INSTALLED:return"Running";default:return e}}}),app.filter("accessRestrictionLabel",function(){return function(e){return""===e?"public":"roleUser"===e?"private":"roleAdmin"===e?"private (Admins only)":e}}),app.directive("laterName",function(){return{restrict:"A",require:["?ngModel","^?form"],link:function(e,o,n,r){n.$set("name",n.laterName);var t=r[0],a=r[1];t&&a&&(t.$name=n.name,a.$addControl(t),e.$on("$destroy",function(){a.$removeControl(t)}))}}}),angular.module("Application").service("Client",["$http","md5",function(e,o){function n(e,o){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof o?o:JSON.stringify(o)}function r(e){return function(o,r){return 401===r?a.logout():void e(new n(r,o))}}function t(){this._ready=!1,this._configListener=[],this._readyListener=[],this._userInfo={username:null,email:null,admin:!1},this._token=null,this._clientId="cid-webadmin",this._clientSecret="unused",this._config={apiServerOrigin:null,webServerOrigin:null,fqdn:null,ip:null,revision:null,update:{box:null,apps:null},isDev:!1,progress:{},isCustomDomain:!1,developerMode:!1},this._installedApps=[],this.setToken(localStorage.token)}var a=null;return t.prototype.setReady=function(){this._ready||(this._ready=!0,this._readyListener.forEach(function(e){e()}))},t.prototype.onReady=function(e){this._ready&&e(),this._readyListener.push(e)},t.prototype.onConfig=function(e){this._configListener.push(e),e(this._config)},t.prototype.setUserInfo=function(e){this._userInfo.username=e.username,this._userInfo.email=e.email,this._userInfo.admin=!!e.admin,this._userInfo.gravatar="https://www.gravatar.com/avatar/"+o.createHash(e.email.toLowerCase())+".jpg?s=24&d=mm",this._userInfo.gravatarHuge="https://www.gravatar.com/avatar/"+o.createHash(e.email.toLowerCase())+".jpg?s=128&d=mm"},t.prototype.setConfig=function(e){this._config.apiServerOrigin=e.apiServerOrigin,this._config.webServerOrigin=e.webServerOrigin,this._config.version=e.version,this._config.fqdn=e.fqdn,this._config.ip=e.ip,this._config.revision=e.revision,this._config.update=e.update,this._config.isDev=e.isDev,this._config.progress=e.progress,this._config.progress=e.progress,this._config.isCustomDomain=e.isCustomDomain,this._config.developerMode=e.developerMode;var o=this;this._configListener.forEach(function(e){e(o._config)})},t.prototype.getInstalledApps=function(){return this._installedApps},t.prototype.getUserInfo=function(){return this._userInfo},t.prototype.getConfig=function(){return this._config},t.prototype.setToken=function(o){e.defaults.headers.common.Authorization="Bearer "+o,o?localStorage.token=o:localStorage.removeItem("token"),this._token=o},t.prototype.config=function(o){e.get("/api/v1/cloudron/config").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.userInfo=function(o){var t=this;e.get("/api/v1/profile").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):(t.setUserInfo(e),void o(null,e))}).error(r(o))},t.prototype.changeDeveloperMode=function(o,t,a){var s=this,i={password:t,enabled:o};e.post("/api/v1/developer",i).success(function(e,r){return 200!==r?a(new n(r,e)):(s._config.developerMode=o,void a(null))}).error(r(a))},t.prototype.installApp=function(o,t,a,s,i,p){var l=this,u={appStoreId:o,manifest:t,password:a,location:i.location,portBindings:i.portBindings,accessRestriction:i.accessRestriction};e.post("/api/v1/apps/install",u).success(function(e,o){return 202!==o||"object"!=typeof e?p(new n(o,e)):(e.manifest={title:s},l._installedApps.push(e),void p(null,e.id))}).error(r(p))},t.prototype.uninstallApp=function(o,t,a){var s={password:t};e.post("/api/v1/apps/"+o+"/uninstall",s).success(function(e,o){return 202!==o?a(new n(o,e)):void a(null)}).error(r(a))},t.prototype.configureApp=function(o,t,a,s){var i={appId:o,password:t,location:a.location,portBindings:a.portBindings,accessRestriction:a.accessRestriction};e.post("/api/v1/apps/"+o+"/configure",i).success(function(e,o){return 202!==o?s(new n(o,e)):void s(null)}).error(r(s))},t.prototype.updateApp=function(o,t,a,s,i){e.post("/api/v1/apps/"+o+"/update",{manifest:t,password:s,portBindings:a}).success(function(e,o){return 202!==o?i(new n(o,e)):void i(null)}).error(r(i))},t.prototype.startApp=function(o,t){var a={};e.post("/api/v1/apps/"+o+"/start",a).success(function(e,o){return 202!==o?t(new n(o,e)):void t(null)}).error(r(t))},t.prototype.stopApp=function(o,t){var a={};e.post("/api/v1/apps/"+o+"/stop",a).success(function(e,o){return 202!==o?t(new n(o,e)):void t(null)}).error(r(t))},t.prototype.version=function(o){e.get("/api/v1/cloudron/status").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.isServerFirstTime=function(o){e.get("/api/v1/cloudron/status").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,!e.activated)}).error(r(o))},t.prototype.getNakedDomain=function(o){e.get("/api/v1/settings/naked_domain").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e.appid)}).error(r(o))},t.prototype.setNakedDomain=function(o,t){e.post("/api/v1/settings/naked_domain",{appid:o}).success(function(e,o){return 204!==o?t(new n(o)):void t(null)}).error(r(t))},t.prototype.getApps=function(o){e.get("/api/v1/apps").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e.apps)}).error(r(o))},t.prototype.getApp=function(e,o){var n=null;return this._installedApps.some(function(o){return o.id===e?(n=o,!0):!1}),n?o(null,n):o(new Error("App not found"))},t.prototype.getAppLogStream=function(e){var o=new EventSource("/api/v1/apps/"+e+"/logstream");return o},t.prototype.getAppLogUrl=function(e){return"/api/v1/apps/"+e+"/logs?access_token="+this._token},t.prototype.setAdmin=function(o,t,a){var s={username:o,admin:t};e.post("/api/v1/users/"+o+"/admin",s).success(function(e,o){return 204!==o?a(new n(o,e)):void a(null)}).error(r(a))},t.prototype.createAdmin=function(o,t,a,s,i){var p={username:o,password:t,email:a},l=this;e.post("/api/v1/cloudron/activate?setupToken="+s,p).success(function(e,r){return 201!==r||"object"!=typeof e?i(new n(r,e)):(l.setToken(e.token),l.setUserInfo({username:o,email:a,admin:!0}),void i(null,e.activated))}).error(r(i))},t.prototype.listUsers=function(o){e.get("/api/v1/users").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.getOAuthClients=function(o){e.get("/api/v1/oauth/clients").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e.clients)}).error(r(o))},t.prototype.delTokensByClientId=function(o,t){e["delete"]("/api/v1/oauth/clients/"+o+"/tokens").success(function(e,o){return 204!==o?t(new n(o,e)):void t(null)}).error(r(t))},t.prototype.update=function(o,t){e.post("/api/v1/cloudron/update",{password:o}).success(function(e,o){return 202!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(r(t))},t.prototype.reboot=function(o){e.get("/api/v1/cloudron/reboot").success(function(e,r){return 202!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.backup=function(o){e.post("/api/v1/cloudron/backups").success(function(e,r){return 202!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.setCertificate=function(o,t,a){console.log("will set certificate");var s=new FormData;s.append("certificate",o),s.append("key",t),e.post("/api/v1/cloudron/certificate",s,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e,o){return 202!==o?a(new n(o,e)):void a(null)}).error(r(a))},t.prototype.graphs=function(o,t,a){var s={params:{target:o,format:"json",from:t}};e.get("/api/v1/cloudron/graphs",s).success(function(e,o){return 200!==o||"object"!=typeof e?a(new n(o,e)):void a(null,e)}).error(r(a))},t.prototype.createUser=function(o,t,a){var s={username:o,email:t};e.post("/api/v1/users",s).success(function(e,o){return 201!==o||"object"!=typeof e?a(new n(o,e)):void a(null,e)}).error(r(a))},t.prototype.removeUser=function(o,t,a){var s={password:t};e({method:"DELETE",url:"/api/v1/users/"+o,data:s,headers:{"Content-Type":"application/json"}}).success(function(e,o){return 204!==o?a(new n(o,e)):void a(null)}).error(r(a))},t.prototype.changePassword=function(o,t,a){var s={password:o,newPassword:t};e.post("/api/v1/users/"+this._userInfo.username+"/password",s).success(function(e,o){return 204!==o?a(new n(o,e)):void a(null,e)}).error(r(a))},t.prototype.changeEmail=function(o,t,a){var s={password:t,email:o};e.put("/api/v1/users/"+this._userInfo.username,s).success(function(e,o){return 204!==o?a(new n(o,e)):void a(null,e)}).error(r(a))},t.prototype.refreshConfig=function(e){var o=this;e="function"==typeof e?e:function(){},this.config(function(n,r){return n?e(n):(o.setConfig(r),void e(null))})},t.prototype.refreshInstalledApps=function(e){var o=this;e="function"==typeof e?e:function(){},this.getApps(function(n,r){if(n)return e(n);r.forEach(function(e){for(var n=!1,r=0;r<o._installedApps.length;++r)if(o._installedApps[r].id===e.id){n=r;break}n!==!1?angular.copy(e,o._installedApps[n]):o._installedApps.push(e)});for(var t=o._installedApps.length-1;t>=0;--t)r.some(function(e){return e.id===o._installedApps[t].id})||o._installedApps.splice(t,1);e(null)})},t.prototype.logout=function(){this.setToken(null),this._userInfo={},window.location.href="/api/v1/session/logout"},t.prototype.exchangeCodeForToken=function(o,t){var a={grant_type:"authorization_code",code:o,redirect_uri:window.location.origin,client_id:this._clientId,client_secret:this._clientSecret};e.post("/api/v1/oauth/token?response_type=token&client_id="+this._clientId,a).success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e.access_token)}).error(r(t))},a=new t}]),angular.module("Application").service("AppStore",["$http","Client",function(e,o){function n(e,o){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof o?o:JSON.stringify(o)}function r(){this._appsCache={}}return r.prototype.getApps=function(r){if(null===o.getConfig().apiServerOrigin)return r(new n(420,"Enhance Your Calm"));var t=this;e.get(o.getConfig().apiServerOrigin+"/api/v1/appstore/apps",{params:{boxVersion:o.getConfig().version}}).success(function(e,o){return 200!==o?r(new n(o,e)):(e.apps.forEach(function(e){t._appsCache[e.id]||(t._appsCache[e.id]=e)}),r(null,t._appsCache))}).error(function(e,o){return r(new n(o,e))})},r.prototype.getAppById=function(e,o){if(e in this._appsCache)return o(null,this._appsCache[e]);var r=this;this.getApps(function(t){return t?o(t):e in r._appsCache?o(null,r._appsCache[e]):void o(new n(404,"Not found"))})},r.prototype.getManifest=function(r,t){if(null===o.getConfig().apiServerOrigin)return t(new n(420,"Enhance Your Calm"));var a=o.getConfig().apiServerOrigin+"/api/v1/appstore/apps/"+r+"/manifest";console.log("Getting the manifest of ",r,a),e.get(a).success(function(e,o){return 200!==o?t(new n(o,e)):t(null,e)}).error(function(e,o){return t(new n(o,e))})},new r}]),angular.module("Application").controller("MainController",["$scope","$route","$interval","Client",function(e,o,n,r){e.initialized=!1,e.userInfo=r.getUserInfo(),e.config={},e.update={error:{},password:""},e.isActive=function(e){return o.current?0===o.current.$$route.originalPath.indexOf(e):!1},e.logout=function(o){o.stopPropagation(),e.initialized=!1,r.logout()},e.login=function(){var e=window.location.origin+"/login_callback.html",o="root,profile,apps,roleAdmin";window.location.href="/api/v1/oauth/dialog/authorize?response_type=code&client_id="+r._clientId+"&redirect_uri="+e+"&scope="+o},e.setup=function(){window.location.href="/error.html?errorCode=1"},e.error=function(e){console.error(e),window.location.href="/error.html"},e.showUpdateModal=function(o){e.update.error.password=null,e.update.password="",o.$setPristine(),o.$setUntouched(),$("#updateModal").modal("show")},e.doUpdate=function(){e.update.error.password=null,r.update(e.update.password,function(o){return o?void(403===o.statusCode?(e.update.error.password="Incorrect password",e.update.password=""):console.error("Unable to update.",o)):void(window.location.href="/update.html")})},e.backup=function(){$("#backupProgressModal").modal("show"),e.initialized=!1,r.backup(function(o){function n(){r.version(function(o){return o?window.setTimeout(n,1e3):($("#backupProgressModal").modal("hide"),void(e.initialized=!0))})}o&&console.error(o),window.setTimeout(n,5e3)})},r.isServerFirstTime(function(o,t){return o?e.error(o):t?e.setup():void(localStorage.token?r.refreshConfig(function(o){return o&&401===o.statusCode?e.login():o?e.error(o):(r.getConfig().progress.update&&(window.location.href="/update.html"),void r.userInfo(function(o){return o?e.error(o):void r.refreshInstalledApps(function(o){if(o)return e.error(o);var t=n(r.refreshInstalledApps.bind(r),2e3),a=n(r.refreshConfig.bind(r),5e3);e.$on("$destroy",function(){n.cancel(t),n.cancel(a)}),r.setReady(),e.config=r.getConfig(),e.initialized=!0})}))}):e.login())}),r.onConfig(function(e){e.progress.update&&(window.location.href="/update.html")}),["updateModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AccountController",["$scope","$location","Client",function(e,o,n){function r(o){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.password="",e.passwordchange.newPassword="",e.passwordchange.newPasswordRepeat="",o&&(o.$setPristine(),o.$setUntouched())}function t(o){e.emailchange.error.email=null,e.emailchange.error.password=null,e.emailchange.email="",e.emailchange.password="",o&&(o.$setPristine(),o.$setUntouched())}function a(){e.developerModeChange.error.password=null,e.developerModeChange.password="",e.developerModeChangeForm.$setPristine(),e.developerModeChangeForm.$setUntouched()}e.user=n.getUserInfo(),e.config=n.getConfig(),e.activeClients=[],e.tokenInUse=null,e.passwordchange={busy:!1,error:{},password:"",newPassword:"",newPasswordRepeat:""},e.emailchange={busy:!1,error:{},email:"",password:""},e.developerModeChange={busy:!1,error:{},password:""},e.doChangePassword=function(o){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.busy=!0,n.changePassword(e.passwordchange.password,e.passwordchange.newPassword,function(n){return n?void(403===n.statusCode?(e.passwordchange.error.password=!0,e.passwordchange.password=""):console.error("Unable to change password.",n)):(e.passwordchange.busy=!1,r(o),void $("#passwordChangeModal").modal("hide"))})},e.doChangeEmail=function(o){e.emailchange.error.email=null,e.emailchange.error.password=null,e.emailchange.busy=!0,n.changeEmail(e.emailchange.email,e.emailchange.password,function(r){return r?void(403===r.statusCode?(e.emailchange.error.password=!0,e.emailchange.password=""):console.error("Unable to change email.",r)):(e.emailchange.busy=!1,t(o),n.userInfo(function(){}),void $("#emailChangeModal").modal("hide"))})},e.doChangeDeveloperMode=function(){e.developerModeChange.error.password=null,e.developerModeChange.busy=!0,n.changeDeveloperMode(!e.config.developerMode,e.developerModeChange.password,function(o){return o?void(403===o.statusCode?(e.developerModeChange.error.password=!0,e.developerModeChange.password=""):console.error("Unable to change password.",o)):(e.developerModeChange.busy=!1,a(),void $("#developerModeChangeModal").modal("hide"))})},e.showChangePassword=function(e){r(e),$("#passwordChangeModal").modal("show")},e.showChangeEmail=function(e){t(e),$("#emailChangeModal").modal("show")},e.showChangeDeveloperMode=function(){a(),$("#developerModeChangeModal").modal("show")},e.removeAccessTokens=function(e,o){n.delTokensByClientId(e.id,function(e){return e?console.error(e):void $(o.target).addClass("disabled")})},n.onReady(function(){e.tokenInUse=n._token,n.getOAuthClients(function(o,n){return o?console.error(o):void(e.activeClients=n)})}),["passwordChangeModal","emailChangeModal","developerModeChangeModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AppsController",["$scope","$location","Client","AppStore",function(e,o,n,r){e.installedApps=n.getInstalledApps(),e.config=n.getConfig(),e.appconfigure={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.appuninstall={error:{},app:{},password:""},e.appupdate={error:{},app:{},password:"",manifest:{},portBindings:{}},e.reset=function(){e.appconfigure.error={},e.appconfigure.app={},e.appconfigure.location="",e.appconfigure.password="",e.appconfigure.portBindings={},e.appconfigure.accessRestriction="",e.config_form.$setPristine(),e.config_form.$setUntouched(),e.appuninstall.app={},e.appuninstall.error={},e.appuninstall.password="",e.appuninstall.manifest={},e.appuninstall.portBindings={},e.uninstall_form.$setPristine(),e.uninstall_form.$setUntouched()},e.showConfigure=function(o){e.reset(),e.appconfigure.app=o,e.appconfigure.location=o.location,e.appconfigure.portBindings=o.manifest.tcpPorts,e.appconfigure.accessRestriction=o.accessRestriction,$("#appConfigureModal").modal("show")},e.doConfigure=function(){e.appconfigure.busy=!0,e.appconfigure.error.name=null,e.appconfigure.error.password=null;var o={};for(var r in e.appconfigure.portBindings)o[r]=e.appconfigure.portBindings[r].hostPort;n.configureApp(e.appconfigure.app.id,e.appconfigure.password,{location:e.appconfigure.location,portBindings:o,accessRestriction:e.appconfigure.accessRestriction},function(o){return o?(403===o.statusCode?(e.appconfigure.error.password="Wrong password provided.",e.appconfigure.password=""):e.appconfigure.error.name="App with the name "+e.appconfigure.app.name+" cannot be configured.",void(e.appconfigure.busy=!1)):(e.appconfigure.busy=!1,$("#appConfigureModal").modal("hide"),void e.reset())})},e.showUninstall=function(o){e.reset(),e.appuninstall.app=o,$("#appUninstallModal").modal("show")},e.doUninstall=function(){e.appuninstall.error.password=null,n.uninstallApp(e.appuninstall.app.id,e.appuninstall.password,function(o){return o?void(403===o.statusCode?(e.appuninstall.password="",e.appuninstall.error.password=!0):console.error(o)):($("#appUninstallModal").modal("hide"),void e.reset())})},e.showUpdate=function(o){e.appupdate.app=o,e.appupdate.error.password=null,r.getManifest(o.appStoreId,function(n,r){if(n)return console.error(n);e.appupdate.manifest=r,e.appupdate.portBindings=angular.copy(o.portBindings);for(var t in e.appupdate.manifest.tcpPorts)e.appupdate.portBindings[t]=e.appupdate.manifest.tcpPorts[t],e.appupdate.portBindings[t].isNew=!e.appupdate.app.portBindings[t];for(t in e.appupdate.app.portBindings)e.appupdate.manifest.tcpPorts[t]||(e.appupdate.portBindings[t].isObsolete=!0);$("#appUpdateModal").modal("show")})},e.doUpdate=function(o){e.appupdate.error.password=null,n.updateApp(e.appupdate.app.id,e.appupdate.manifest,e.appupdate.portBindings,e.appupdate.password,function(n){return n?void(403===n.statusCode?(e.appupdate.password="",e.appupdate.error.password=!0):console.error(n)):(e.appupdate.app={},e.appupdate.password="",o.$setPristine(),o.$setUntouched(),void $("#appUpdateModal").modal("hide"))})},e.cancel=function(){window.history.back()},["appConfigureModal","appUninstallModal","appUpdateModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AppStoreController",["$scope","$location","$timeout","Client","AppStore",function(e,o,n,r,t){function a(){e.ready=!1,t.getApps(function(o,r){return o?(console.error(o),n(a,1e3)):(e.apps=r,void(e.ready=!0))})}r.onReady(function(){r.getUserInfo().admin||o.path("/")}),e.ready=!1,e.apps=[],e.config=r.getConfig(),e.appinstall={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.reset=function(){e.appinstall.app={},e.appinstall.location="",e.appinstall.password="",e.appinstall.portBindings={},e.appinstall.accessRestriction="",e.appinstall.error={},e.install_form.$setPristine(),e.install_form.$setUntouched()},e.showInstall=function(o){e.reset(),t.getManifest(o.id,function(n,r){return n?console.error(n):(o.manifest=r,e.appinstall.app=o,e.appinstall.location=o.location,e.appinstall.portBindings=r.tcpPorts,e.appinstall.accessRestriction=o.accessRestriction||"",void $("#appInstallModal").modal("show"))})},e.doInstall=function(){e.appinstall.busy=!0,e.appinstall.error.name=null,e.appinstall.error.password=null,e.appinstall.error.port=null;var n={};for(var t in e.appinstall.portBindings)n[t]=e.appinstall.portBindings[t].hostPort;r.installApp(e.appinstall.app.id,e.appinstall.app.manifest,e.appinstall.password,e.appinstall.app.title,{location:e.appinstall.location,portBindings:n,accessRestriction:e.appinstall.accessRestriction},function(n){return n?(409===n.statusCode&&-1!==n.message.indexOf("is reserved")?e.appinstall.error.port="This port is already in use.":409===n.statusCode?e.appinstall.error.name="Application already exists.":403===n.statusCode?(e.appinstall.error.password="Wrong password provided.",e.appinstall.password=""):e.appinstall.error.name="App with the name "+e.appinstall.app.name+" cannot be installed.",void(e.appinstall.busy=!1)):(e.appinstall.busy=!1,$("#appInstallModal").modal("hide"),e.reset(),void o.path("/apps"))})},a(),["appInstallModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("DnsController",["$scope","$location","Client",function(e,o,n){n.onReady(function(){n.getUserInfo().admin||o.path("/")}),e.ready=!1,e.user=n.getUserInfo(),e.config=n.getConfig(),e.nakedDomainApp=null,e.certificateFile=null,e.certificateFileName="",e.keyFile=null,e.keyFileName="",e.setNakedDomain=function(){var o=e.nakedDomainApp?e.nakedDomainApp.id:"admin";n.setNakedDomain(o,function(e){return e?console.error("Error setting naked domain",e):void 0})},e.backup=function(){$("#backupProgressModal").modal("show"),e.$parent.initialized=!1,n.backup(function(o){function r(){n.version(function(o){return o?window.setTimeout(r,1e3):($("#backupProgressModal").modal("hide"),void(e.$parent.initialized=!0))})}o&&console.error(o),window.setTimeout(r,5e3)})},e.update=function(){$("#updateModal").modal("hide"),e.$parent.initialized=!1,n.update(function(e){e&&console.error(e),window.location.href="/update.html"})},document.getElementById("idCertificate").onchange=function(o){e.$apply(function(){e.certificateFile=o.target.files[0],e.certificateFileName=o.target.files[0].name})},document.getElementById("idKey").onchange=function(o){e.$apply(function(){e.keyFile=o.target.files[0],e.keyFileName=o.target.files[0].name})},e.setCertificate=function(){return console.log("Will set the certificate"),e.certificateFile?e.keyFile?void n.setCertificate(e.certificateFile,e.keyFile,function(e){return e?console.log(e):void window.setTimeout(window.location.reload.bind(window.location,!0),3e3)}):console.log("Key not set"):console.log("Certificate not set")},n.onConfig(function(){e.tokenInUse=n._token,n.getApps(function(o,r){o&&console.error("Error loading app list"),e.apps=r,n.getNakedDomain(function(o,n){if(o)return console.error(o);e.nakedDomainApp=null;for(var r=0;r<e.apps.length;r++)if(e.apps[r].id===n){e.nakedDomainApp=e.apps[r];break}e.ready=!0})})})}]),angular.module("Application").controller("GraphsController",["$scope","$location","Client",function(e,o,n){function r(e,o){var n=[];o&&o.datapoints&&(n=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var r=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:n,name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:r}),new Rickshaw.Graph.Axis.Y({graph:r,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:r,formatter:function(e,o,n){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(n).toFixed(2)+"%<br>";return t}})}r.render()}function t(e,o,n){var r=[],t=[];o&&o.datapoints&&(r=o.datapoints.map(function(e){return{y:e[0],x:e[1]}})),n&&n.datapoints&&(t=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"NetworkChart"),renderer:"area",width:580,height:250,series:[{color:"steelblue",data:r,name:"tx"},{color:"green",data:t,name:"rx"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"NetworkYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,o,n){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(n/1024).toFixed(2)+"KB<br>";return t}})}a.render()}function a(e,o,n){var r=[],t=[];o&&o.datapoints&&(r=o.datapoints.map(function(e){return{y:e[0],x:e[1]}})),n&&n.datapoints&&(t=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:r,name:"apps"},{color:"green",data:t,name:"data"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,o,n){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(n/1073741824).toFixed(2)+"GB<br>";return t}}),new Rickshaw.Graph.Legend({graph:a,element:document.getElementById(e+"DiskLegend")})}a.render()}n.getUserInfo().admin||o.path("/"),e.activeTab="day";var s="transformNull(scale(divideSeries(sumSeries(collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user),sumSeries(collectd.localhost.cpu-0.cpu-idle,collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user,collectd.localhost.cpu-0.cpu-wait)), 100), 0)",i="transformNull(collectd.localhost.interface-eth0.if_octets.tx, 0)",p="transformNull(collectd.localhost.interface-eth0.if_octets.rx, 0)",l="transformNull(collectd.localhost.df-loop0.df_complex-used, 0)",u="transformNull(collectd.localhost.df-loop1.df_complex-used, 0)";e.updateGraphs=function(){var o=e.activeTab,c="-24hours";switch(o){case"day":c="-24hours";break;case"month":c="-1month";break;case"year":c="-1year";break;default:console.log("internal errror")}n.graphs([s,i,p,l,u],c,function(e,n){return e?console.log(e):(r(o,n[0]),t(o,n[1],n[2]),void a(o,n[3],n[4]))})},n.onReady(e.updateGraphs)}]),angular.module("Application").controller("UsersController",["$scope","$location","Client",function(e,o,n){function r(){n.listUsers(function(o,n){return o?console.error("Unable to get user listing.",o):(e.users=n.users,void(e.ready=!0))})}n.onReady(function(){n.getUserInfo().admin||o.path("/")}),e.ready=!1,e.users=[],e.userInfo=n.getUserInfo(),e.userremove={busy:!1,error:{},userInfo:{},username:"",password:""},e.useradd={busy:!1,alreadyTaken:!1,error:{},username:"",email:""},e.isMe=function(e){return e.username===n.getUserInfo().username},e.isAdmin=function(e){return!!e.admin},e.toggleAdmin=function(e){n.setAdmin(e.username,!e.admin,function(o){return o?console.error(o):void(e.admin=!e.admin)})},e.doAdd=function(){e.useradd.alreadyTaken="",e.useradd.error.username=null,e.useradd.error.email=null,n.createUser(e.useradd.username,e.useradd.email,function(o){if(o&&409===o.statusCode)return e.useradd.alreadyTaken=e.username,console.error("Username already taken");if(o&&400===o.statusCode){if(-1!==o.message.indexOf("email"))return e.useradd.error.email="Invalid Email",void(e.useradd.email="");if(-1!==o.message.indexOf("username"))return e.useradd.error.username="Invalid Username",void(e.useradd.username="")}else o&&console.error("Unable to create user.",o),r(),$("#userAddModal").modal("hide")})},e.showUserRemove=function(o){e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.userInfo=o,$("#userRemoveModal").modal("show")},e.doUserRemove=function(o){return e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.username!==e.userremove.userInfo.username?(e.userremove.error.username="Username does not match",void(e.userremove.username="")):void n.removeUser(e.userremove.userInfo.id,e.userremove.password,function(n){return n&&403===n.statusCode?(e.userremove.error.password="Incorrect password",void(e.userremove.password="")):n?console.error("Unable to delete user.",n):(e.userremove.userInfo={},e.userremove.username="",e.userremove.password="",o.$setPristine(),o.$setUntouched(),$("#userRemoveModal").modal("hide"),void r())})},r(),["userAddModal","userRemoveModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiY2xpZW50LmpzIiwiYXBwc3RvcmUuanMiLCJtYWluLmpzIiwiYWNjb3VudC5qcyIsImFwcHMuanMiLCJkbnMuanMiLCJncmFwaHMuanMiLCJ1c2Vycy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwicmVkaXJlY3RUbyIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsIklTVEFURVMiLCJJU1RBVEVfUEVORElOR19JTlNUQUxMIiwiSVNUQVRFX1BFTkRJTkdfQ09ORklHVVJFIiwiSVNUQVRFX1BFTkRJTkdfVU5JTlNUQUxMIiwiSVNUQVRFX1BFTkRJTkdfUkVTVE9SRSIsIklTVEFURV9QRU5ESU5HX1VQREFURSIsIklTVEFURV9FUlJPUiIsIklTVEFURV9JTlNUQUxMRUQiLCJmaWx0ZXIiLCJpbnB1dCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVxdWlyZSIsImxpbmsiLCJzY29wZSIsImVsZW0iLCJhdHRycyIsImN0cmxzIiwiJHNldCIsImxhdGVyTmFtZSIsIm1vZGVsQ3RybCIsImZvcm1DdHJsIiwiJG5hbWUiLCJuYW1lIiwiJGFkZENvbnRyb2wiLCIkb24iLCIkcmVtb3ZlQ29udHJvbCIsInNlcnZpY2UiLCIkaHR0cCIsIm1kNSIsIkNsaWVudEVycm9yIiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJFcnJvciIsImNhbGwiLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVmYXVsdEVycm9ySGFuZGxlciIsImNhbGxiYWNrIiwiZGF0YSIsInN0YXR1cyIsImNsaWVudCIsImxvZ291dCIsIkNsaWVudCIsIl9yZWFkeSIsIl9jb25maWdMaXN0ZW5lciIsIl9yZWFkeUxpc3RlbmVyIiwiX3VzZXJJbmZvIiwidXNlcm5hbWUiLCJlbWFpbCIsImFkbWluIiwiX3Rva2VuIiwiX2NsaWVudElkIiwiX2NsaWVudFNlY3JldCIsIl9jb25maWciLCJhcGlTZXJ2ZXJPcmlnaW4iLCJ3ZWJTZXJ2ZXJPcmlnaW4iLCJmcWRuIiwiaXAiLCJyZXZpc2lvbiIsInVwZGF0ZSIsImJveCIsImFwcHMiLCJpc0RldiIsInByb2dyZXNzIiwiaXNDdXN0b21Eb21haW4iLCJkZXZlbG9wZXJNb2RlIiwiX2luc3RhbGxlZEFwcHMiLCJzZXRUb2tlbiIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwicHJvdG90eXBlIiwic2V0UmVhZHkiLCJmb3JFYWNoIiwib25SZWFkeSIsInB1c2giLCJvbkNvbmZpZyIsInNldFVzZXJJbmZvIiwidXNlckluZm8iLCJncmF2YXRhciIsImNyZWF0ZUhhc2giLCJ0b0xvd2VyQ2FzZSIsImdyYXZhdGFySHVnZSIsInNldENvbmZpZyIsInZlcnNpb24iLCJ0aGF0IiwiZ2V0SW5zdGFsbGVkQXBwcyIsImdldFVzZXJJbmZvIiwiZ2V0Q29uZmlnIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiQXV0aG9yaXphdGlvbiIsInJlbW92ZUl0ZW0iLCJnZXQiLCJzdWNjZXNzIiwiZXJyb3IiLCJjaGFuZ2VEZXZlbG9wZXJNb2RlIiwiZW5hYmxlZCIsInBhc3N3b3JkIiwicG9zdCIsImluc3RhbGxBcHAiLCJpZCIsIm1hbmlmZXN0IiwidGl0bGUiLCJhcHBTdG9yZUlkIiwibG9jYXRpb24iLCJwb3J0QmluZGluZ3MiLCJhY2Nlc3NSZXN0cmljdGlvbiIsInVuaW5zdGFsbEFwcCIsImFwcElkIiwiY29uZmlndXJlQXBwIiwidXBkYXRlQXBwIiwic3RhcnRBcHAiLCJzdG9wQXBwIiwiaXNTZXJ2ZXJGaXJzdFRpbWUiLCJhY3RpdmF0ZWQiLCJnZXROYWtlZERvbWFpbiIsImFwcGlkIiwic2V0TmFrZWREb21haW4iLCJnZXRBcHBzIiwiZ2V0QXBwIiwiYXBwRm91bmQiLCJzb21lIiwiZ2V0QXBwTG9nU3RyZWFtIiwic291cmNlIiwiRXZlbnRTb3VyY2UiLCJnZXRBcHBMb2dVcmwiLCJzZXRBZG1pbiIsInBheWxvYWQiLCJjcmVhdGVBZG1pbiIsInNldHVwVG9rZW4iLCJsaXN0VXNlcnMiLCJnZXRPQXV0aENsaWVudHMiLCJjbGllbnRzIiwiZGVsVG9rZW5zQnlDbGllbnRJZCIsInJlYm9vdCIsImJhY2t1cCIsInNldENlcnRpZmljYXRlIiwiY2VydGlmaWNhdGVGaWxlIiwia2V5RmlsZSIsImNvbnNvbGUiLCJsb2ciLCJmZCIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiQ29udGVudC1UeXBlIiwidW5kZWZpbmVkIiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiZ3JhcGhzIiwidGFyZ2V0cyIsImZyb20iLCJwYXJhbXMiLCJ0YXJnZXQiLCJmb3JtYXQiLCJjcmVhdGVVc2VyIiwicmVtb3ZlVXNlciIsInVzZXJJZCIsIm1ldGhvZCIsInVybCIsImNoYW5nZVBhc3N3b3JkIiwiY3VycmVudFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJjaGFuZ2VFbWFpbCIsInB1dCIsInJlZnJlc2hDb25maWciLCJyZXN1bHQiLCJyZWZyZXNoSW5zdGFsbGVkQXBwcyIsImZvdW5kIiwiaSIsImxlbmd0aCIsImNvcHkiLCJzcGxpY2UiLCJ3aW5kb3ciLCJocmVmIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW4iLCJhdXRoQ29kZSIsImdyYW50X3R5cGUiLCJjb2RlIiwicmVkaXJlY3RfdXJpIiwib3JpZ2luIiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsImFjY2Vzc190b2tlbiIsIkFwcFN0b3JlRXJyb3IiLCJBcHBTdG9yZSIsIl9hcHBzQ2FjaGUiLCJib3hWZXJzaW9uIiwiZ2V0QXBwQnlJZCIsImdldE1hbmlmZXN0IiwibWFuaWZlc3RVcmwiLCIkc2NvcGUiLCIkcm91dGUiLCIkaW50ZXJ2YWwiLCJpbml0aWFsaXplZCIsImlzQWN0aXZlIiwiY3VycmVudCIsIiQkcm91dGUiLCJvcmlnaW5hbFBhdGgiLCJpbmRleE9mIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJsb2dpbiIsImNhbGxiYWNrVVJMIiwic2V0dXAiLCJzaG93VXBkYXRlTW9kYWwiLCJmb3JtIiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsIiQiLCJtb2RhbCIsImRvVXBkYXRlIiwiY2hlY2tJZkRvbmUiLCJzZXRUaW1lb3V0IiwiaXNGaXJzdFRpbWUiLCJyZWZyZXNoQXBwc1RpbWVyIiwiYmluZCIsInJlZnJlc2hDb25maWdUaW1lciIsImNhbmNlbCIsIm9uIiwiZmluZCIsImZvY3VzIiwiJGxvY2F0aW9uIiwicGFzc3dvcmRDaGFuZ2VSZXNldCIsInBhc3N3b3JkY2hhbmdlIiwibmV3UGFzc3dvcmRSZXBlYXQiLCJlbWFpbENoYW5nZVJlc2V0IiwiZW1haWxjaGFuZ2UiLCJkZXZlbG9wZXJNb2RlQ2hhbmdlUmVzZXQiLCJkZXZlbG9wZXJNb2RlQ2hhbmdlIiwiZGV2ZWxvcGVyTW9kZUNoYW5nZUZvcm0iLCJ1c2VyIiwiYWN0aXZlQ2xpZW50cyIsInRva2VuSW5Vc2UiLCJidXN5IiwiZG9DaGFuZ2VQYXNzd29yZCIsImRvQ2hhbmdlRW1haWwiLCJkb0NoYW5nZURldmVsb3Blck1vZGUiLCJzaG93Q2hhbmdlUGFzc3dvcmQiLCJzaG93Q2hhbmdlRW1haWwiLCJzaG93Q2hhbmdlRGV2ZWxvcGVyTW9kZSIsInJlbW92ZUFjY2Vzc1Rva2VucyIsImFkZENsYXNzIiwiaW5zdGFsbGVkQXBwcyIsImFwcGNvbmZpZ3VyZSIsImFwcHVuaW5zdGFsbCIsImFwcHVwZGF0ZSIsInJlc2V0IiwiY29uZmlnX2Zvcm0iLCJ1bmluc3RhbGxfZm9ybSIsInNob3dDb25maWd1cmUiLCJ0Y3BQb3J0cyIsImRvQ29uZmlndXJlIiwiZW52IiwiaG9zdFBvcnQiLCJzaG93VW5pbnN0YWxsIiwiZG9Vbmluc3RhbGwiLCJzaG93VXBkYXRlIiwiaXNOZXciLCJpc09ic29sZXRlIiwiaGlzdG9yeSIsImJhY2siLCIkdGltZW91dCIsInJlZnJlc2giLCJyZWFkeSIsInBhdGgiLCJhcHBpbnN0YWxsIiwiaW5zdGFsbF9mb3JtIiwic2hvd0luc3RhbGwiLCJkb0luc3RhbGwiLCJwb3J0IiwibmFrZWREb21haW5BcHAiLCJjZXJ0aWZpY2F0ZUZpbGVOYW1lIiwia2V5RmlsZU5hbWUiLCIkcGFyZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm9uY2hhbmdlIiwiJGFwcGx5IiwiZmlsZXMiLCJyZWxvYWQiLCJyZW5kZXJDcHUiLCJhY3RpdmVUYWIiLCJjcHVEYXRhIiwidHJhbnNmb3JtZWRDcHUiLCJkYXRhcG9pbnRzIiwibWFwIiwicG9pbnQiLCJ5IiwieCIsImNwdUdyYXBoIiwiUmlja3NoYXciLCJHcmFwaCIsImVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVuZGVyZXIiLCJ3aWR0aCIsImhlaWdodCIsIm1pbiIsIm1heCIsInNlcmllcyIsImNvbG9yIiwiQXhpcyIsIlRpbWUiLCJncmFwaCIsIlkiLCJvcmllbnRhdGlvbiIsInRpY2tGb3JtYXQiLCJGaXh0dXJlcyIsIk51bWJlciIsImZvcm1hdEtNQlQiLCJIb3ZlckRldGFpbCIsImZvcm1hdHRlciIsInN3YXRjaCIsImNvbnRlbnQiLCJ0b0ZpeGVkIiwicmVuZGVyIiwicmVuZGVyTmV0d29yayIsInR4RGF0YSIsInJ4RGF0YSIsInRyYW5zZm9ybWVkVHgiLCJ0cmFuc2Zvcm1lZFJ4IiwibmV0d29ya0dyYXBoIiwicmVuZGVyRGlzayIsImFwcHNVc2VkRGF0YSIsImRhdGFVc2VkRGF0YSIsInRyYW5zZm9ybWVkQXBwc1VzZWQiLCJ0cmFuc2Zvcm1lZERhdGFVc2VkIiwiZGlza0dyYXBoIiwiTGVnZW5kIiwiY3B1VXNhZ2VUYXJnZXQiLCJuZXR3b3JrVXNhZ2VUeFRhcmdldCIsIm5ldHdvcmtVc2FnZVJ4VGFyZ2V0IiwiZGlza1VzYWdlQXBwc1VzZWRUYXJnZXQiLCJkaXNrVXNhZ2VEYXRhVXNlZFRhcmdldCIsInVwZGF0ZUdyYXBocyIsInVzZXJzIiwidXNlcnJlbW92ZSIsInVzZXJhZGQiLCJhbHJlYWR5VGFrZW4iLCJpc01lIiwiaXNBZG1pbiIsInRvZ2dsZUFkbWluIiwiZG9BZGQiLCJzaG93VXNlclJlbW92ZSIsImRvVXNlclJlbW92ZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFLQSxJQUFBQSxLQUFBQyxRQUFBQyxPQUFBLGVBQUEsVUFBQSxZQUFBLGVBR0FGLEtBQUFHLFFBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsS0FBQSxLQUNBQyxXQUFBLFVBQ0FELEtBQUEsVUFDQUUsV0FBQSxrQkFDQUMsWUFBQSxxQkFDQUgsS0FBQSxhQUNBRSxXQUFBLHFCQUNBQyxZQUFBLHdCQUNBSCxLQUFBLFNBQ0FFLFdBQUEsaUJBQ0FDLFlBQUEsb0JBQ0FILEtBQUEsUUFDQUUsV0FBQSxnQkFDQUMsWUFBQSxtQkFDQUgsS0FBQSxZQUNBRSxXQUFBLG9CQUNBQyxZQUFBLHVCQUNBSCxLQUFBLFdBQ0FFLFdBQUEsbUJBQ0FDLFlBQUEsc0JBQ0FDLFdBQUFILFdBQUEsUUFJQSxJQUFBSSxVQUNBQyx1QkFBQSxrQkFDQUMseUJBQUEsb0JBQ0FDLHlCQUFBLG9CQUNBQyx1QkFBQSxrQkFDQUMsc0JBQUEsaUJBQ0FDLGFBQUEsUUFDQUMsaUJBQUEsWUFHQWpCLEtBQUFrQixPQUFBLHFCQUFBLFdBQ0EsTUFBQSxVQUFBQyxHQUNBLE1BQUFBLEtBQUFULFFBQUFNLGNBQUEsRUFDQUcsSUFBQVQsUUFBQU8sa0JBQUEsR0FDQSxLQUlBakIsSUFBQWtCLE9BQUEseUJBQUEsV0FDQSxNQUFBLFVBQUFDLEdBQ0EsT0FBQUEsR0FDQSxJQUFBVCxTQUFBQyx1QkFBQSxNQUFBLFlBQ0EsS0FBQUQsU0FBQUUseUJBQUEsTUFBQSxhQUNBLEtBQUFGLFNBQUFHLHlCQUFBLE1BQUEsY0FDQSxLQUFBSCxTQUFBSSx1QkFBQSxNQUFBLFVBQ0EsS0FBQUosU0FBQUssc0JBQUEsTUFBQSxVQUNBLEtBQUFMLFNBQUFNLGFBQUEsTUFBQSxPQUNBLEtBQUFOLFNBQUFPLGlCQUFBLE1BQUEsU0FDQSxTQUFBLE1BQUFFLE9BS0FuQixJQUFBa0IsT0FBQSx5QkFBQSxXQUNBLE1BQUEsVUFBQUMsR0FDQSxNQUFBLEtBQUFBLEVBQUEsU0FDQSxhQUFBQSxFQUFBLFVBQ0EsY0FBQUEsRUFBQSx3QkFFQUEsS0FNQW5CLElBQUFvQixVQUFBLFlBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FDLFNBQUEsV0FBQSxVQUNBQyxLQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FELEVBQUFFLEtBQUEsT0FBQUYsRUFBQUcsVUFFQSxJQUFBQyxHQUFBSCxFQUFBLEdBQ0FJLEVBQUFKLEVBQUEsRUFDQUcsSUFBQUMsSUFDQUQsRUFBQUUsTUFBQU4sRUFBQU8sS0FDQUYsRUFBQUcsWUFBQUosR0FDQU4sRUFBQVcsSUFBQSxXQUFBLFdBQ0FKLEVBQUFLLGVBQUFOLFVDdEZBN0IsUUFBQUMsT0FBQSxlQUFBbUMsUUFBQSxVQUFBLFFBQUEsTUFBQSxTQUFBQyxFQUFBQyxHQUdBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQ0FDLE1BQUFDLEtBQUFDLE1BQ0FBLEtBQUFaLEtBQUFZLEtBQUFDLFlBQUFiLEtBQ0FZLEtBQUFKLFdBQUFBLEVBRUFJLEtBQUFILFFBREEsZ0JBQUFBLEdBQ0FBLEVBRUFLLEtBQUFDLFVBQUFOLEdBSUEsUUFBQU8sR0FBQUMsR0FDQSxNQUFBLFVBQUFDLEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxFQUFBQyxFQUFBQyxhQUNBSixHQUFBLEdBQUFWLEdBQUFZLEVBQUFELEtBSUEsUUFBQUksS0FDQVYsS0FBQVcsUUFBQSxFQUNBWCxLQUFBWSxtQkFDQVosS0FBQWEsa0JBQ0FiLEtBQUFjLFdBQ0FDLFNBQUEsS0FDQUMsTUFBQSxLQUNBQyxPQUFBLEdBRUFqQixLQUFBa0IsT0FBQSxLQUNBbEIsS0FBQW1CLFVBQUEsZUFDQW5CLEtBQUFvQixjQUFBLFNBQ0FwQixLQUFBcUIsU0FDQUMsZ0JBQUEsS0FDQUMsZ0JBQUEsS0FDQUMsS0FBQSxLQUNBQyxHQUFBLEtBQ0FDLFNBQUEsS0FDQUMsUUFBQUMsSUFBQSxLQUFBQyxLQUFBLE1BQ0FDLE9BQUEsRUFDQUMsWUFDQUMsZ0JBQUEsRUFDQUMsZUFBQSxHQUVBakMsS0FBQWtDLGtCQUVBbEMsS0FBQW1DLFNBQUFDLGFBQUFDLE9BOUNBLEdBQUE3QixHQUFBLElBK2VBLE9BOWJBRSxHQUFBNEIsVUFBQUMsU0FBQSxXQUNBdkMsS0FBQVcsU0FFQVgsS0FBQVcsUUFBQSxFQUNBWCxLQUFBYSxlQUFBMkIsUUFBQSxTQUFBbkMsR0FDQUEsUUFJQUssRUFBQTRCLFVBQUFHLFFBQUEsU0FBQXBDLEdBQ0FMLEtBQUFXLFFBQUFOLElBQ0FMLEtBQUFhLGVBQUE2QixLQUFBckMsSUFHQUssRUFBQTRCLFVBQUFLLFNBQUEsU0FBQXRDLEdBQ0FMLEtBQUFZLGdCQUFBOEIsS0FBQXJDLEdBQ0FBLEVBQUFMLEtBQUFxQixVQUdBWCxFQUFBNEIsVUFBQU0sWUFBQSxTQUFBQyxHQUVBN0MsS0FBQWMsVUFBQUMsU0FBQThCLEVBQUE5QixTQUNBZixLQUFBYyxVQUFBRSxNQUFBNkIsRUFBQTdCLE1BQ0FoQixLQUFBYyxVQUFBRyxRQUFBNEIsRUFBQTVCLE1BQ0FqQixLQUFBYyxVQUFBZ0MsU0FBQSxtQ0FBQXBELEVBQUFxRCxXQUFBRixFQUFBN0IsTUFBQWdDLGVBQUEsaUJBQ0FoRCxLQUFBYyxVQUFBbUMsYUFBQSxtQ0FBQXZELEVBQUFxRCxXQUFBRixFQUFBN0IsTUFBQWdDLGVBQUEsbUJBR0F0QyxFQUFBNEIsVUFBQVksVUFBQSxTQUFBNUYsR0FFQTBDLEtBQUFxQixRQUFBQyxnQkFBQWhFLEVBQUFnRSxnQkFDQXRCLEtBQUFxQixRQUFBRSxnQkFBQWpFLEVBQUFpRSxnQkFDQXZCLEtBQUFxQixRQUFBOEIsUUFBQTdGLEVBQUE2RixRQUNBbkQsS0FBQXFCLFFBQUFHLEtBQUFsRSxFQUFBa0UsS0FDQXhCLEtBQUFxQixRQUFBSSxHQUFBbkUsRUFBQW1FLEdBQ0F6QixLQUFBcUIsUUFBQUssU0FBQXBFLEVBQUFvRSxTQUNBMUIsS0FBQXFCLFFBQUFNLE9BQUFyRSxFQUFBcUUsT0FDQTNCLEtBQUFxQixRQUFBUyxNQUFBeEUsRUFBQXdFLE1BQ0E5QixLQUFBcUIsUUFBQVUsU0FBQXpFLEVBQUF5RSxTQUNBL0IsS0FBQXFCLFFBQUFVLFNBQUF6RSxFQUFBeUUsU0FDQS9CLEtBQUFxQixRQUFBVyxlQUFBMUUsRUFBQTBFLGVBQ0FoQyxLQUFBcUIsUUFBQVksY0FBQTNFLEVBQUEyRSxhQUVBLElBQUFtQixHQUFBcEQsSUFFQUEsTUFBQVksZ0JBQUE0QixRQUFBLFNBQUFuQyxHQUNBQSxFQUFBK0MsRUFBQS9CLFlBSUFYLEVBQUE0QixVQUFBZSxpQkFBQSxXQUNBLE1BQUFyRCxNQUFBa0MsZ0JBR0F4QixFQUFBNEIsVUFBQWdCLFlBQUEsV0FDQSxNQUFBdEQsTUFBQWMsV0FHQUosRUFBQTRCLFVBQUFpQixVQUFBLFdBQ0EsTUFBQXZELE1BQUFxQixTQUdBWCxFQUFBNEIsVUFBQUgsU0FBQSxTQUFBRSxHQUNBNUMsRUFBQStELFNBQUFDLFFBQUFDLE9BQUFDLGNBQUEsVUFBQXRCLEVBQ0FBLEVBQ0FELGFBQUFDLE1BQUFBLEVBREFELGFBQUF3QixXQUFBLFNBRUE1RCxLQUFBa0IsT0FBQW1CLEdBTUEzQixFQUFBNEIsVUFBQWhGLE9BQUEsU0FBQStDLEdBQ0FaLEVBQUFvRSxJQUFBLDJCQUFBQyxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsR0FBQSxnQkFBQUQsR0FBQUQsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLEtBQUFDLEtBQ0F5RCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUFPLFNBQUEsU0FBQXhDLEdBQ0EsR0FBQStDLEdBQUFwRCxJQUVBUCxHQUFBb0UsSUFBQSxtQkFBQUMsUUFBQSxTQUFBeEQsRUFBQUMsR0FDQSxNQUFBLE9BQUFBLEdBQUEsZ0JBQUFELEdBQUFELEVBQUEsR0FBQVYsR0FBQVksRUFBQUQsS0FHQThDLEVBQUFSLFlBQUF0QyxPQUVBRCxHQUFBLEtBQUFDLE1BQ0F5RCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUEwQixvQkFBQSxTQUFBQyxFQUFBQyxFQUFBN0QsR0FDQSxHQUFBK0MsR0FBQXBELEtBRUFNLEdBQUE0RCxTQUFBQSxFQUFBRCxRQUFBQSxFQUNBeEUsR0FBQTBFLEtBQUEsb0JBQUE3RCxHQUFBd0QsUUFBQSxTQUFBeEQsRUFBQUMsR0FDQSxNQUFBLE9BQUFBLEVBQUFGLEVBQUEsR0FBQVYsR0FBQVksRUFBQUQsS0FHQThDLEVBQUEvQixRQUFBWSxjQUFBZ0MsTUFFQTVELEdBQUEsU0FDQTBELE1BQUEzRCxFQUFBQyxLQUdBSyxFQUFBNEIsVUFBQThCLFdBQUEsU0FBQUMsRUFBQUMsRUFBQUosRUFBQUssRUFBQWpILEVBQUErQyxHQUNBLEdBQUErQyxHQUFBcEQsS0FDQU0sR0FBQWtFLFdBQUFILEVBQUFDLFNBQUFBLEVBQUFKLFNBQUFBLEVBQUFPLFNBQUFuSCxFQUFBbUgsU0FBQUMsYUFBQXBILEVBQUFvSCxhQUFBQyxrQkFBQXJILEVBQUFxSCxrQkFDQWxGLEdBQUEwRSxLQUFBLHVCQUFBN0QsR0FBQXdELFFBQUEsU0FBQXhELEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxHQUFBLGdCQUFBRCxHQUFBRCxFQUFBLEdBQUFWLEdBQUFZLEVBQUFELEtBR0FBLEVBQUFnRSxVQUFBQyxNQUFBQSxHQUNBbkIsRUFBQWxCLGVBQUFRLEtBQUFwQyxPQUVBRCxHQUFBLEtBQUFDLEVBQUErRCxPQUNBTixNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUFzQyxhQUFBLFNBQUFDLEVBQUFYLEVBQUE3RCxHQUNBLEdBQUFDLElBQUE0RCxTQUFBQSxFQUNBekUsR0FBQTBFLEtBQUEsZ0JBQUFVLEVBQUEsYUFBQXZFLEdBQUF3RCxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsRUFBQUYsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLFFBQ0EwRCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUF3QyxhQUFBLFNBQUFULEVBQUFILEVBQUE1RyxFQUFBK0MsR0FDQSxHQUFBQyxJQUFBdUUsTUFBQVIsRUFBQUgsU0FBQUEsRUFBQU8sU0FBQW5ILEVBQUFtSCxTQUFBQyxhQUFBcEgsRUFBQW9ILGFBQUFDLGtCQUFBckgsRUFBQXFILGtCQUNBbEYsR0FBQTBFLEtBQUEsZ0JBQUFFLEVBQUEsYUFBQS9ELEdBQUF3RCxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsRUFBQUYsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLFFBQ0EwRCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUF5QyxVQUFBLFNBQUFWLEVBQUFDLEVBQUFJLEVBQUFSLEVBQUE3RCxHQUNBWixFQUFBMEUsS0FBQSxnQkFBQUUsRUFBQSxXQUFBQyxTQUFBQSxFQUFBSixTQUFBQSxFQUFBUSxhQUFBQSxJQUFBWixRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsRUFBQUYsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLFFBQ0EwRCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUEwQyxTQUFBLFNBQUFYLEVBQUFoRSxHQUNBLEdBQUFDLEtBQ0FiLEdBQUEwRSxLQUFBLGdCQUFBRSxFQUFBLFNBQUEvRCxHQUFBd0QsUUFBQSxTQUFBeEQsRUFBQUMsR0FDQSxNQUFBLE9BQUFBLEVBQUFGLEVBQUEsR0FBQVYsR0FBQVksRUFBQUQsUUFDQUQsR0FBQSxRQUNBMEQsTUFBQTNELEVBQUFDLEtBR0FLLEVBQUE0QixVQUFBMkMsUUFBQSxTQUFBWixFQUFBaEUsR0FDQSxHQUFBQyxLQUNBYixHQUFBMEUsS0FBQSxnQkFBQUUsRUFBQSxRQUFBL0QsR0FBQXdELFFBQUEsU0FBQXhELEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxFQUFBRixFQUFBLEdBQUFWLEdBQUFZLEVBQUFELFFBQ0FELEdBQUEsUUFDQTBELE1BQUEzRCxFQUFBQyxLQUdBSyxFQUFBNEIsVUFBQWEsUUFBQSxTQUFBOUMsR0FDQVosRUFBQW9FLElBQUEsMkJBQUFDLFFBQUEsU0FBQXhELEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxHQUFBLGdCQUFBRCxHQUFBRCxFQUFBLEdBQUFWLEdBQUFZLEVBQUFELFFBQ0FELEdBQUEsS0FBQUMsS0FDQXlELE1BQUEzRCxFQUFBQyxLQUdBSyxFQUFBNEIsVUFBQTRDLGtCQUFBLFNBQUE3RSxHQUNBWixFQUFBb0UsSUFBQSwyQkFBQUMsUUFBQSxTQUFBeEQsRUFBQUMsR0FDQSxNQUFBLE9BQUFBLEdBQUEsZ0JBQUFELEdBQUFELEVBQUEsR0FBQVYsR0FBQVksRUFBQUQsUUFDQUQsR0FBQSxNQUFBQyxFQUFBNkUsYUFDQXBCLE1BQUEzRCxFQUFBQyxLQUdBSyxFQUFBNEIsVUFBQThDLGVBQUEsU0FBQS9FLEdBQ0FaLEVBQUFvRSxJQUFBLGlDQUNBQyxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsR0FBQSxnQkFBQUQsR0FBQUQsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLEtBQUFDLEVBQUErRSxTQUNBdEIsTUFBQTNELEVBQUFDLEtBR0FLLEVBQUE0QixVQUFBZ0QsZUFBQSxTQUFBRCxFQUFBaEYsR0FDQVosRUFBQTBFLEtBQUEsaUNBQUFrQixNQUFBQSxJQUFBdkIsUUFBQSxTQUFBeEQsRUFBQUMsR0FDQSxNQUFBLE9BQUFBLEVBQUFGLEVBQUEsR0FBQVYsR0FBQVksUUFDQUYsR0FBQSxRQUNBMEQsTUFBQTNELEVBQUFDLEtBR0FLLEVBQUE0QixVQUFBaUQsUUFBQSxTQUFBbEYsR0FDQVosRUFBQW9FLElBQUEsZ0JBQUFDLFFBQUEsU0FBQXhELEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxHQUFBLGdCQUFBRCxHQUFBRCxFQUFBLEdBQUFWLEdBQUFZLEVBQUFELFFBQ0FELEdBQUEsS0FBQUMsRUFBQXVCLFFBQ0FrQyxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUFrRCxPQUFBLFNBQUFYLEVBQUF4RSxHQUNBLEdBQUFvRixHQUFBLElBVUEsT0FUQXpGLE1BQUFrQyxlQUFBd0QsS0FBQSxTQUFBdkksR0FDQSxNQUFBQSxHQUFBa0gsS0FBQVEsR0FDQVksRUFBQXRJLEdBQ0EsSUFFQSxJQUlBc0ksRUFBQXBGLEVBQUEsS0FBQW9GLEdBQ0FwRixFQUFBLEdBQUFQLE9BQUEsbUJBR0FZLEVBQUE0QixVQUFBcUQsZ0JBQUEsU0FBQWQsR0FDQSxHQUFBZSxHQUFBLEdBQUFDLGFBQUEsZ0JBQUFoQixFQUFBLGFBQ0EsT0FBQWUsSUFHQWxGLEVBQUE0QixVQUFBd0QsYUFBQSxTQUFBakIsR0FDQSxNQUFBLGdCQUFBQSxFQUFBLHNCQUFBN0UsS0FBQWtCLFFBR0FSLEVBQUE0QixVQUFBeUQsU0FBQSxTQUFBaEYsRUFBQUUsRUFBQVosR0FDQSxHQUFBMkYsSUFDQWpGLFNBQUFBLEVBQ0FFLE1BQUFBLEVBR0F4QixHQUFBMEUsS0FBQSxpQkFBQXBELEVBQUEsU0FBQWlGLEdBQUFsQyxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsRUFBQUYsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLFFBQ0EwRCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUEyRCxZQUFBLFNBQUFsRixFQUFBbUQsRUFBQWxELEVBQUFrRixFQUFBN0YsR0FDQSxHQUFBMkYsSUFDQWpGLFNBQUFBLEVBQ0FtRCxTQUFBQSxFQUNBbEQsTUFBQUEsR0FHQW9DLEVBQUFwRCxJQUVBUCxHQUFBMEUsS0FBQSx3Q0FBQStCLEVBQUFGLEdBQUFsQyxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsR0FBQSxnQkFBQUQsR0FBQUQsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxLQUVBOEMsRUFBQWpCLFNBQUE3QixFQUFBK0IsT0FDQWUsRUFBQVIsYUFBQTdCLFNBQUFBLEVBQUFDLE1BQUFBLEVBQUFDLE9BQUEsUUFFQVosR0FBQSxLQUFBQyxFQUFBNkUsY0FDQXBCLE1BQUEzRCxFQUFBQyxLQUdBSyxFQUFBNEIsVUFBQTZELFVBQUEsU0FBQTlGLEdBQ0FaLEVBQUFvRSxJQUFBLGlCQUFBQyxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsR0FBQSxnQkFBQUQsR0FBQUQsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLEtBQUFDLEtBQ0F5RCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUE4RCxnQkFBQSxTQUFBL0YsR0FDQVosRUFBQW9FLElBQUEseUJBQUFDLFFBQUEsU0FBQXhELEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxHQUFBLGdCQUFBRCxHQUFBRCxFQUFBLEdBQUFWLEdBQUFZLEVBQUFELFFBQ0FELEdBQUEsS0FBQUMsRUFBQStGLFdBQ0F0QyxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUFnRSxvQkFBQSxTQUFBakMsRUFBQWhFLEdBQ0FaLEVBQUFBLFVBQUEseUJBQUE0RSxFQUFBLFdBQUFQLFFBQUEsU0FBQXhELEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxFQUFBRixFQUFBLEdBQUFWLEdBQUFZLEVBQUFELFFBQ0FELEdBQUEsUUFDQTBELE1BQUEzRCxFQUFBQyxLQUdBSyxFQUFBNEIsVUFBQVgsT0FBQSxTQUFBdUMsRUFBQTdELEdBQ0FaLEVBQUEwRSxLQUFBLDJCQUFBRCxTQUFBQSxJQUFBSixRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsR0FBQSxnQkFBQUQsR0FBQUQsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLEtBQUFDLEtBQ0F5RCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUFpRSxPQUFBLFNBQUFsRyxHQUNBWixFQUFBb0UsSUFBQSwyQkFBQUMsUUFBQSxTQUFBeEQsRUFBQUMsR0FDQSxNQUFBLE9BQUFBLEdBQUEsZ0JBQUFELEdBQUFELEVBQUEsR0FBQVYsR0FBQVksRUFBQUQsUUFDQUQsR0FBQSxLQUFBQyxLQUNBeUQsTUFBQTNELEVBQUFDLEtBR0FLLEVBQUE0QixVQUFBa0UsT0FBQSxTQUFBbkcsR0FDQVosRUFBQTBFLEtBQUEsNEJBQUFMLFFBQUEsU0FBQXhELEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxHQUFBLGdCQUFBRCxHQUFBRCxFQUFBLEdBQUFWLEdBQUFZLEVBQUFELFFBQ0FELEdBQUEsS0FBQUMsS0FDQXlELE1BQUEzRCxFQUFBQyxLQUdBSyxFQUFBNEIsVUFBQW1FLGVBQUEsU0FBQUMsRUFBQUMsRUFBQXRHLEdBQ0F1RyxRQUFBQyxJQUFBLHVCQUVBLElBQUFDLEdBQUEsR0FBQUMsU0FDQUQsR0FBQUUsT0FBQSxjQUFBTixHQUNBSSxFQUFBRSxPQUFBLE1BQUFMLEdBRUFsSCxFQUFBMEUsS0FBQSwrQkFBQTJDLEdBQ0FyRCxTQUFBd0QsZUFBQUMsUUFDQUMsaUJBQUEvSixRQUFBZ0ssV0FDQXRELFFBQUEsU0FBQXhELEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxFQUFBRixFQUFBLEdBQUFWLEdBQUFZLEVBQUFELFFBQ0FELEdBQUEsUUFDQTBELE1BQUEzRCxFQUFBQyxLQUdBSyxFQUFBNEIsVUFBQStFLE9BQUEsU0FBQUMsRUFBQUMsRUFBQWxILEdBQ0EsR0FBQS9DLElBQ0FrSyxRQUNBQyxPQUFBSCxFQUNBSSxPQUFBLE9BQ0FILEtBQUFBLEdBSUE5SCxHQUFBb0UsSUFBQSwwQkFBQXZHLEdBQUF3RyxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsR0FBQSxnQkFBQUQsR0FBQUQsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLEtBQUFDLEtBQ0F5RCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUFxRixXQUFBLFNBQUE1RyxFQUFBQyxFQUFBWCxHQUNBLEdBQUFDLElBQ0FTLFNBQUFBLEVBQ0FDLE1BQUFBLEVBR0F2QixHQUFBMEUsS0FBQSxnQkFBQTdELEdBQUF3RCxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsR0FBQSxnQkFBQUQsR0FBQUQsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLEtBQUFDLEtBQ0F5RCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUFzRixXQUFBLFNBQUFDLEVBQUEzRCxFQUFBN0QsR0FDQSxHQUFBQyxJQUNBNEQsU0FBQUEsRUFHQXpFLElBQUFxSSxPQUFBLFNBQUFDLElBQUEsaUJBQUFGLEVBQUF2SCxLQUFBQSxFQUFBbUQsU0FBQXdELGVBQUEsc0JBQUFuRCxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsRUFBQUYsRUFBQSxHQUFBVixHQUFBWSxFQUFBRCxRQUNBRCxHQUFBLFFBQ0EwRCxNQUFBM0QsRUFBQUMsS0FHQUssRUFBQTRCLFVBQUEwRixlQUFBLFNBQUFDLEVBQUFDLEVBQUE3SCxHQUNBLEdBQUFDLElBQ0E0RCxTQUFBK0QsRUFDQUMsWUFBQUEsRUFHQXpJLEdBQUEwRSxLQUFBLGlCQUFBbkUsS0FBQWMsVUFBQUMsU0FBQSxZQUFBVCxHQUFBd0QsUUFBQSxTQUFBeEQsRUFBQUMsR0FDQSxNQUFBLE9BQUFBLEVBQUFGLEVBQUEsR0FBQVYsR0FBQVksRUFBQUQsUUFDQUQsR0FBQSxLQUFBQyxLQUNBeUQsTUFBQTNELEVBQUFDLEtBR0FLLEVBQUE0QixVQUFBNkYsWUFBQSxTQUFBbkgsRUFBQWtELEVBQUE3RCxHQUNBLEdBQUFDLElBQ0E0RCxTQUFBQSxFQUNBbEQsTUFBQUEsRUFHQXZCLEdBQUEySSxJQUFBLGlCQUFBcEksS0FBQWMsVUFBQUMsU0FBQVQsR0FBQXdELFFBQUEsU0FBQXhELEVBQUFDLEdBQ0EsTUFBQSxPQUFBQSxFQUFBRixFQUFBLEdBQUFWLEdBQUFZLEVBQUFELFFBQ0FELEdBQUEsS0FBQUMsS0FDQXlELE1BQUEzRCxFQUFBQyxLQUdBSyxFQUFBNEIsVUFBQStGLGNBQUEsU0FBQWhJLEdBQ0EsR0FBQStDLEdBQUFwRCxJQUVBSyxHQUFBLGtCQUFBQSxHQUFBQSxFQUFBLGFBRUFMLEtBQUExQyxPQUFBLFNBQUF5RyxFQUFBdUUsR0FDQSxNQUFBdkUsR0FBQTFELEVBQUEwRCxJQUVBWCxFQUFBRixVQUFBb0YsT0FDQWpJLEdBQUEsVUFJQUssRUFBQTRCLFVBQUFpRyxxQkFBQSxTQUFBbEksR0FDQSxHQUFBK0MsR0FBQXBELElBRUFLLEdBQUEsa0JBQUFBLEdBQUFBLEVBQUEsYUFFQUwsS0FBQXVGLFFBQUEsU0FBQXhCLEVBQUFsQyxHQUNBLEdBQUFrQyxFQUFBLE1BQUExRCxHQUFBMEQsRUFHQWxDLEdBQUFXLFFBQUEsU0FBQXJGLEdBR0EsSUFBQSxHQUZBcUwsSUFBQSxFQUVBQyxFQUFBLEVBQUFBLEVBQUFyRixFQUFBbEIsZUFBQXdHLFNBQUFELEVBQ0EsR0FBQXJGLEVBQUFsQixlQUFBdUcsR0FBQXBFLEtBQUFsSCxFQUFBa0gsR0FBQSxDQUNBbUUsRUFBQUMsQ0FDQSxPQUlBRCxLQUFBLEVBQ0FwTCxRQUFBdUwsS0FBQXhMLEVBQUFpRyxFQUFBbEIsZUFBQXNHLElBRUFwRixFQUFBbEIsZUFBQVEsS0FBQXZGLElBS0EsS0FBQSxHQUFBc0wsR0FBQXJGLEVBQUFsQixlQUFBd0csT0FBQSxFQUFBRCxHQUFBLElBQUFBLEVBQ0E1RyxFQUFBNkQsS0FBQSxTQUFBOUcsR0FBQSxNQUFBQSxHQUFBeUYsS0FBQWpCLEVBQUFsQixlQUFBdUcsR0FBQXBFLE1BQ0FqQixFQUFBbEIsZUFBQTBHLE9BQUFILEVBQUEsRUFLQXBJLEdBQUEsU0FJQUssRUFBQTRCLFVBQUE3QixPQUFBLFdBQ0FULEtBQUFtQyxTQUFBLE1BQ0FuQyxLQUFBYyxhQUdBK0gsT0FBQXBFLFNBQUFxRSxLQUFBLDBCQUdBcEksRUFBQTRCLFVBQUF5RyxxQkFBQSxTQUFBQyxFQUFBM0ksR0FDQSxHQUFBQyxJQUNBMkksV0FBQSxxQkFDQUMsS0FBQUYsRUFDQUcsYUFBQU4sT0FBQXBFLFNBQUEyRSxPQUNBQyxVQUFBckosS0FBQW1CLFVBQ0FtSSxjQUFBdEosS0FBQW9CLGNBR0EzQixHQUFBMEUsS0FBQSxxREFBQW5FLEtBQUFtQixVQUFBYixHQUFBd0QsUUFBQSxTQUFBeEQsRUFBQUMsR0FDQSxNQUFBLE9BQUFBLEdBQUEsZ0JBQUFELEdBQUFELEVBQUEsR0FBQVYsR0FBQVksRUFBQUQsUUFFQUQsR0FBQSxLQUFBQyxFQUFBaUosZ0JBQ0F4RixNQUFBM0QsRUFBQUMsS0FHQUcsRUFBQSxHQUFBRSxNQ2hmQXRELFFBQUFDLE9BQUEsZUFBQW1DLFFBQUEsWUFBQSxRQUFBLFNBQUEsU0FBQUMsRUFBQWlCLEdBRUEsUUFBQThJLEdBQUE1SixFQUFBQyxHQUNBQyxNQUFBQyxLQUFBQyxNQUNBQSxLQUFBWixLQUFBWSxLQUFBQyxZQUFBYixLQUNBWSxLQUFBSixXQUFBQSxFQUVBSSxLQUFBSCxRQURBLGdCQUFBQSxHQUNBQSxFQUVBSyxLQUFBQyxVQUFBTixHQUlBLFFBQUE0SixLQUNBekosS0FBQTBKLGNBaURBLE1BOUNBRCxHQUFBbkgsVUFBQWlELFFBQUEsU0FBQWxGLEdBQ0EsR0FBQSxPQUFBSyxFQUFBNkMsWUFBQWpDLGdCQUFBLE1BQUFqQixHQUFBLEdBQUFtSixHQUFBLElBQUEscUJBRUEsSUFBQXBHLEdBQUFwRCxJQUVBUCxHQUFBb0UsSUFBQW5ELEVBQUE2QyxZQUFBakMsZ0JBQUEseUJBQUFrRyxRQUFBbUMsV0FBQWpKLEVBQUE2QyxZQUFBSixXQUFBVyxRQUFBLFNBQUF4RCxFQUFBQyxHQUNBLE1BQUEsT0FBQUEsRUFBQUYsRUFBQSxHQUFBbUosR0FBQWpKLEVBQUFELEtBR0FBLEVBQUF1QixLQUFBVyxRQUFBLFNBQUFyRixHQUNBaUcsRUFBQXNHLFdBQUF2TSxFQUFBa0gsTUFFQWpCLEVBQUFzRyxXQUFBdk0sRUFBQWtILElBQUFsSCxLQUdBa0QsRUFBQSxLQUFBK0MsRUFBQXNHLGVBQ0EzRixNQUFBLFNBQUF6RCxFQUFBQyxHQUNBLE1BQUFGLEdBQUEsR0FBQW1KLEdBQUFqSixFQUFBRCxPQUlBbUosRUFBQW5ILFVBQUFzSCxXQUFBLFNBQUEvRSxFQUFBeEUsR0FDQSxHQUFBd0UsSUFBQTdFLE1BQUEwSixXQUFBLE1BQUFySixHQUFBLEtBQUFMLEtBQUEwSixXQUFBN0UsR0FFQSxJQUFBekIsR0FBQXBELElBRUFBLE1BQUF1RixRQUFBLFNBQUF4QixHQUNBLE1BQUFBLEdBQUExRCxFQUFBMEQsR0FDQWMsSUFBQXpCLEdBQUFzRyxXQUFBckosRUFBQSxLQUFBK0MsRUFBQXNHLFdBQUE3RSxRQUVBeEUsR0FBQSxHQUFBbUosR0FBQSxJQUFBLGlCQUlBQyxFQUFBbkgsVUFBQXVILFlBQUEsU0FBQWhGLEVBQUF4RSxHQUNBLEdBQUEsT0FBQUssRUFBQTZDLFlBQUFqQyxnQkFBQSxNQUFBakIsR0FBQSxHQUFBbUosR0FBQSxJQUFBLHFCQUVBLElBQUFNLEdBQUFwSixFQUFBNkMsWUFBQWpDLGdCQUFBLHlCQUFBdUQsRUFBQSxXQUNBK0IsU0FBQUMsSUFBQSwyQkFBQWhDLEVBQUFpRixHQUNBckssRUFBQW9FLElBQUFpRyxHQUFBaEcsUUFBQSxTQUFBeEQsRUFBQUMsR0FDQSxNQUFBLE9BQUFBLEVBQUFGLEVBQUEsR0FBQW1KLEdBQUFqSixFQUFBRCxJQUNBRCxFQUFBLEtBQUFDLEtBQ0F5RCxNQUFBLFNBQUF6RCxFQUFBQyxHQUNBLE1BQUFGLEdBQUEsR0FBQW1KLEdBQUFqSixFQUFBRCxPQUdBLEdBQUFtSixNQ2pFQXJNLFFBQUFDLE9BQUEsZUFBQUssV0FBQSxrQkFBQSxTQUFBLFNBQUEsWUFBQSxTQUFBLFNBQUFxTSxFQUFBQyxFQUFBQyxFQUFBdkosR0FDQXFKLEVBQUFHLGFBQUEsRUFDQUgsRUFBQWxILFNBQUFuQyxFQUFBNEMsY0FDQXlHLEVBQUF6TSxVQUVBeU0sRUFBQXBJLFFBQ0FvQyxTQUNBRyxTQUFBLElBR0E2RixFQUFBSSxTQUFBLFNBQUFwQyxHQUNBLE1BQUFpQyxHQUFBSSxRQUNBLElBQUFKLEVBQUFJLFFBQUFDLFFBQUFDLGFBQUFDLFFBQUF4QyxJQURBLEdBSUFnQyxFQUFBdEosT0FBQSxTQUFBK0osR0FDQUEsRUFBQUMsa0JBQ0FWLEVBQUFHLGFBQUEsRUFDQXhKLEVBQUFELFVBR0FzSixFQUFBVyxNQUFBLFdBQ0EsR0FBQUMsR0FBQTlCLE9BQUFwRSxTQUFBMkUsT0FBQSx1QkFDQXpLLEVBQUEsNkJBQ0FrSyxRQUFBcEUsU0FBQXFFLEtBQUEsK0RBQUFwSSxFQUFBUyxVQUFBLGlCQUFBd0osRUFBQSxVQUFBaE0sR0FHQW9MLEVBQUFhLE1BQUEsV0FDQS9CLE9BQUFwRSxTQUFBcUUsS0FBQSwyQkFHQWlCLEVBQUFoRyxNQUFBLFNBQUFBLEdBQ0E2QyxRQUFBN0MsTUFBQUEsR0FDQThFLE9BQUFwRSxTQUFBcUUsS0FBQSxlQUdBaUIsRUFBQWMsZ0JBQUEsU0FBQUMsR0FDQWYsRUFBQXBJLE9BQUFvQyxNQUFBRyxTQUFBLEtBQ0E2RixFQUFBcEksT0FBQXVDLFNBQUEsR0FFQTRHLEVBQUFDLGVBQ0FELEVBQUFFLGdCQUVBQyxFQUFBLGdCQUFBQyxNQUFBLFNBR0FuQixFQUFBb0IsU0FBQSxXQUNBcEIsRUFBQXBJLE9BQUFvQyxNQUFBRyxTQUFBLEtBRUF4RCxFQUFBaUIsT0FBQW9JLEVBQUFwSSxPQUFBdUMsU0FBQSxTQUFBSCxHQUNBLE1BQUFBLFFBQ0EsTUFBQUEsRUFBQW5FLFlBQ0FtSyxFQUFBcEksT0FBQW9DLE1BQUFHLFNBQUEscUJBQ0E2RixFQUFBcEksT0FBQXVDLFNBQUEsSUFFQTBDLFFBQUE3QyxNQUFBLG9CQUFBQSxTQUtBOEUsT0FBQXBFLFNBQUFxRSxLQUFBLG1CQUlBaUIsRUFBQXZELE9BQUEsV0FDQXlFLEVBQUEsd0JBQUFDLE1BQUEsUUFFQW5CLEVBQUFHLGFBQUEsRUFFQXhKLEVBQUE4RixPQUFBLFNBQUF6QyxHQUtBLFFBQUFxSCxLQUNBMUssRUFBQXlDLFFBQUEsU0FBQVksR0FDQSxNQUFBQSxHQUFBOEUsT0FBQXdDLFdBQUFELEVBQUEsTUFFQUgsRUFBQSx3QkFBQUMsTUFBQSxhQUNBbkIsRUFBQUcsYUFBQSxNQVRBbkcsR0FBQTZDLFFBQUE3QyxNQUFBQSxHQWFBOEUsT0FBQXdDLFdBQUFELEVBQUEsUUFJQTFLLEVBQUF3RSxrQkFBQSxTQUFBbkIsRUFBQXVILEdBQ0EsTUFBQXZILEdBQUFnRyxFQUFBaEcsTUFBQUEsR0FDQXVILEVBQUF2QixFQUFBYSxhQUtBeEksYUFBQUMsTUFDQTNCLEVBQUEySCxjQUFBLFNBQUF0RSxHQUNBLE1BQUFBLElBQUEsTUFBQUEsRUFBQW5FLFdBQUFtSyxFQUFBVyxRQUNBM0csRUFBQWdHLEVBQUFoRyxNQUFBQSxJQUdBckQsRUFBQTZDLFlBQUF4QixTQUFBSixTQUFBa0gsT0FBQXBFLFNBQUFxRSxLQUFBLG9CQUVBcEksR0FBQW1DLFNBQUEsU0FBQWtCLEdBQ0EsTUFBQUEsR0FBQWdHLEVBQUFoRyxNQUFBQSxPQUVBckQsR0FBQTZILHFCQUFBLFNBQUF4RSxHQUNBLEdBQUFBLEVBQUEsTUFBQWdHLEdBQUFoRyxNQUFBQSxFQUdBLElBQUF3SCxHQUFBdEIsRUFBQXZKLEVBQUE2SCxxQkFBQWlELEtBQUE5SyxHQUFBLEtBQ0ErSyxFQUFBeEIsRUFBQXZKLEVBQUEySCxjQUFBbUQsS0FBQTlLLEdBQUEsSUFFQXFKLEdBQUF6SyxJQUFBLFdBQUEsV0FDQTJLLEVBQUF5QixPQUFBSCxHQUNBdEIsRUFBQXlCLE9BQUFELEtBSUEvSyxFQUFBNkIsV0FFQXdILEVBQUF6TSxPQUFBb0QsRUFBQTZDLFlBRUF3RyxFQUFBRyxhQUFBLFNBS0FILEVBQUFXLFdBS0FoSyxFQUFBaUMsU0FBQSxTQUFBckYsR0FDQUEsRUFBQXlFLFNBQUFKLFNBQ0FrSCxPQUFBcEUsU0FBQXFFLEtBQUEsbUJBS0EsZUFBQXRHLFFBQUEsU0FBQTZCLEdBQ0E0RyxFQUFBLElBQUE1RyxHQUFBc0gsR0FBQSxpQkFBQSxXQUNBVixFQUFBakwsTUFBQTRMLEtBQUEscUJBQUFDLGVDN0lBek8sUUFBQUMsT0FBQSxlQUFBSyxXQUFBLHFCQUFBLFNBQUEsWUFBQSxTQUFBLFNBQUFxTSxFQUFBK0IsRUFBQXBMLEdBNEJBLFFBQUFxTCxHQUFBakIsR0FDQWYsRUFBQWlDLGVBQUFqSSxNQUFBRyxTQUFBLEtBQ0E2RixFQUFBaUMsZUFBQWpJLE1BQUFtRSxZQUFBLEtBQ0E2QixFQUFBaUMsZUFBQWpJLE1BQUFrSSxrQkFBQSxLQUNBbEMsRUFBQWlDLGVBQUE5SCxTQUFBLEdBQ0E2RixFQUFBaUMsZUFBQTlELFlBQUEsR0FDQTZCLEVBQUFpQyxlQUFBQyxrQkFBQSxHQUVBbkIsSUFDQUEsRUFBQUMsZUFDQUQsRUFBQUUsaUJBSUEsUUFBQWtCLEdBQUFwQixHQUNBZixFQUFBb0MsWUFBQXBJLE1BQUEvQyxNQUFBLEtBQ0ErSSxFQUFBb0MsWUFBQXBJLE1BQUFHLFNBQUEsS0FDQTZGLEVBQUFvQyxZQUFBbkwsTUFBQSxHQUNBK0ksRUFBQW9DLFlBQUFqSSxTQUFBLEdBRUE0RyxJQUNBQSxFQUFBQyxlQUNBRCxFQUFBRSxpQkFJQSxRQUFBb0IsS0FDQXJDLEVBQUFzQyxvQkFBQXRJLE1BQUFHLFNBQUEsS0FDQTZGLEVBQUFzQyxvQkFBQW5JLFNBQUEsR0FFQTZGLEVBQUF1Qyx3QkFBQXZCLGVBQ0FoQixFQUFBdUMsd0JBQUF0QixnQkExREFqQixFQUFBd0MsS0FBQTdMLEVBQUE0QyxjQUNBeUcsRUFBQXpNLE9BQUFvRCxFQUFBNkMsWUFFQXdHLEVBQUF5QyxpQkFDQXpDLEVBQUEwQyxXQUFBLEtBRUExQyxFQUFBaUMsZ0JBQ0FVLE1BQUEsRUFDQTNJLFNBQ0FHLFNBQUEsR0FDQWdFLFlBQUEsR0FDQStELGtCQUFBLElBR0FsQyxFQUFBb0MsYUFDQU8sTUFBQSxFQUNBM0ksU0FDQS9DLE1BQUEsR0FDQWtELFNBQUEsSUFHQTZGLEVBQUFzQyxxQkFDQUssTUFBQSxFQUNBM0ksU0FDQUcsU0FBQSxJQXFDQTZGLEVBQUE0QyxpQkFBQSxTQUFBN0IsR0FDQWYsRUFBQWlDLGVBQUFqSSxNQUFBRyxTQUFBLEtBQ0E2RixFQUFBaUMsZUFBQWpJLE1BQUFtRSxZQUFBLEtBQ0E2QixFQUFBaUMsZUFBQWpJLE1BQUFrSSxrQkFBQSxLQUNBbEMsRUFBQWlDLGVBQUFVLE1BQUEsRUFFQWhNLEVBQUFzSCxlQUFBK0IsRUFBQWlDLGVBQUE5SCxTQUFBNkYsRUFBQWlDLGVBQUE5RCxZQUFBLFNBQUFuRSxHQUNBLE1BQUFBLFFBQ0EsTUFBQUEsRUFBQW5FLFlBQ0FtSyxFQUFBaUMsZUFBQWpJLE1BQUFHLFVBQUEsRUFDQTZGLEVBQUFpQyxlQUFBOUgsU0FBQSxJQUVBMEMsUUFBQTdDLE1BQUEsNkJBQUFBLEtBS0FnRyxFQUFBaUMsZUFBQVUsTUFBQSxFQUNBWCxFQUFBakIsT0FFQUcsR0FBQSx3QkFBQUMsTUFBQSxZQUlBbkIsRUFBQTZDLGNBQUEsU0FBQTlCLEdBQ0FmLEVBQUFvQyxZQUFBcEksTUFBQS9DLE1BQUEsS0FDQStJLEVBQUFvQyxZQUFBcEksTUFBQUcsU0FBQSxLQUNBNkYsRUFBQW9DLFlBQUFPLE1BQUEsRUFFQWhNLEVBQUF5SCxZQUFBNEIsRUFBQW9DLFlBQUFuTCxNQUFBK0ksRUFBQW9DLFlBQUFqSSxTQUFBLFNBQUFILEdBQ0EsTUFBQUEsUUFDQSxNQUFBQSxFQUFBbkUsWUFDQW1LLEVBQUFvQyxZQUFBcEksTUFBQUcsVUFBQSxFQUNBNkYsRUFBQW9DLFlBQUFqSSxTQUFBLElBRUEwQyxRQUFBN0MsTUFBQSwwQkFBQUEsS0FLQWdHLEVBQUFvQyxZQUFBTyxNQUFBLEVBQ0FSLEVBQUFwQixHQUdBcEssRUFBQW1DLFNBQUEsa0JBRUFvSSxHQUFBLHFCQUFBQyxNQUFBLFlBSUFuQixFQUFBOEMsc0JBQUEsV0FDQTlDLEVBQUFzQyxvQkFBQXRJLE1BQUFHLFNBQUEsS0FDQTZGLEVBQUFzQyxvQkFBQUssTUFBQSxFQUVBaE0sRUFBQXNELHFCQUFBK0YsRUFBQXpNLE9BQUEyRSxjQUFBOEgsRUFBQXNDLG9CQUFBbkksU0FBQSxTQUFBSCxHQUNBLE1BQUFBLFFBQ0EsTUFBQUEsRUFBQW5FLFlBQ0FtSyxFQUFBc0Msb0JBQUF0SSxNQUFBRyxVQUFBLEVBQ0E2RixFQUFBc0Msb0JBQUFuSSxTQUFBLElBRUEwQyxRQUFBN0MsTUFBQSw2QkFBQUEsS0FLQWdHLEVBQUFzQyxvQkFBQUssTUFBQSxFQUNBTixRQUVBbkIsR0FBQSw2QkFBQUMsTUFBQSxZQUlBbkIsRUFBQStDLG1CQUFBLFNBQUFoQyxHQUNBaUIsRUFBQWpCLEdBRUFHLEVBQUEsd0JBQUFDLE1BQUEsU0FHQW5CLEVBQUFnRCxnQkFBQSxTQUFBakMsR0FDQW9CLEVBQUFwQixHQUVBRyxFQUFBLHFCQUFBQyxNQUFBLFNBR0FuQixFQUFBaUQsd0JBQUEsV0FDQVosSUFFQW5CLEVBQUEsNkJBQUFDLE1BQUEsU0FHQW5CLEVBQUFrRCxtQkFBQSxTQUFBek0sRUFBQWdLLEdBQ0E5SixFQUFBNEYsb0JBQUE5RixFQUFBNkQsR0FBQSxTQUFBTixHQUNBLE1BQUFBLEdBQUE2QyxRQUFBN0MsTUFBQUEsT0FDQWtILEdBQUFULEVBQUEvQyxRQUFBeUYsU0FBQSxlQUlBeE0sRUFBQStCLFFBQUEsV0FDQXNILEVBQUEwQyxXQUFBL0wsRUFBQVEsT0FFQVIsRUFBQTBGLGdCQUFBLFNBQUFyQyxFQUFBeUksR0FDQSxNQUFBekksR0FBQTZDLFFBQUE3QyxNQUFBQSxRQUVBZ0csRUFBQXlDLGNBQUFBLFFBS0Esc0JBQUEsbUJBQUEsNEJBQUFoSyxRQUFBLFNBQUE2QixHQUNBNEcsRUFBQSxJQUFBNUcsR0FBQXNILEdBQUEsaUJBQUEsV0FDQVYsRUFBQWpMLE1BQUE0TCxLQUFBLHFCQUFBQyxlQzVLQXpPLFFBQUFDLE9BQUEsZUFBQUssV0FBQSxrQkFBQSxTQUFBLFlBQUEsU0FBQSxXQUFBLFNBQUFxTSxFQUFBK0IsRUFBQXBMLEVBQUErSSxHQUNBTSxFQUFBb0QsY0FBQXpNLEVBQUEyQyxtQkFDQTBHLEVBQUF6TSxPQUFBb0QsRUFBQTZDLFlBRUF3RyxFQUFBcUQsY0FDQVYsTUFBQSxFQUNBM0ksU0FDQTVHLE9BQ0FzSCxTQUFBLEdBQ0FQLFNBQUEsR0FDQVEsZ0JBQ0FDLGtCQUFBLElBR0FvRixFQUFBc0QsY0FDQXRKLFNBQ0E1RyxPQUNBK0csU0FBQSxJQUdBNkYsRUFBQXVELFdBQ0F2SixTQUNBNUcsT0FDQStHLFNBQUEsR0FDQUksWUFDQUksaUJBR0FxRixFQUFBd0QsTUFBQSxXQUNBeEQsRUFBQXFELGFBQUFySixTQUNBZ0csRUFBQXFELGFBQUFqUSxPQUNBNE0sRUFBQXFELGFBQUEzSSxTQUFBLEdBQ0FzRixFQUFBcUQsYUFBQWxKLFNBQUEsR0FDQTZGLEVBQUFxRCxhQUFBMUksZ0JBQ0FxRixFQUFBcUQsYUFBQXpJLGtCQUFBLEdBRUFvRixFQUFBeUQsWUFBQXpDLGVBQ0FoQixFQUFBeUQsWUFBQXhDLGdCQUVBakIsRUFBQXNELGFBQUFsUSxPQUNBNE0sRUFBQXNELGFBQUF0SixTQUNBZ0csRUFBQXNELGFBQUFuSixTQUFBLEdBQ0E2RixFQUFBc0QsYUFBQS9JLFlBQ0F5RixFQUFBc0QsYUFBQTNJLGdCQUVBcUYsRUFBQTBELGVBQUExQyxlQUNBaEIsRUFBQTBELGVBQUF6QyxpQkFHQWpCLEVBQUEyRCxjQUFBLFNBQUF2USxHQUNBNE0sRUFBQXdELFFBRUF4RCxFQUFBcUQsYUFBQWpRLElBQUFBLEVBQ0E0TSxFQUFBcUQsYUFBQTNJLFNBQUF0SCxFQUFBc0gsU0FDQXNGLEVBQUFxRCxhQUFBMUksYUFBQXZILEVBQUFtSCxTQUFBcUosU0FDQTVELEVBQUFxRCxhQUFBekksa0JBQUF4SCxFQUFBd0gsa0JBRUFzRyxFQUFBLHNCQUFBQyxNQUFBLFNBR0FuQixFQUFBNkQsWUFBQSxXQUNBN0QsRUFBQXFELGFBQUFWLE1BQUEsRUFDQTNDLEVBQUFxRCxhQUFBckosTUFBQTNFLEtBQUEsS0FDQTJLLEVBQUFxRCxhQUFBckosTUFBQUcsU0FBQSxJQUVBLElBQUFRLEtBQ0EsS0FBQSxHQUFBbUosS0FBQTlELEdBQUFxRCxhQUFBMUksYUFDQUEsRUFBQW1KLEdBQUE5RCxFQUFBcUQsYUFBQTFJLGFBQUFtSixHQUFBQyxRQUdBcE4sR0FBQW9FLGFBQUFpRixFQUFBcUQsYUFBQWpRLElBQUFrSCxHQUFBMEYsRUFBQXFELGFBQUFsSixVQUFBTyxTQUFBc0YsRUFBQXFELGFBQUEzSSxTQUFBQyxhQUFBQSxFQUFBQyxrQkFBQW9GLEVBQUFxRCxhQUFBekksbUJBQUEsU0FBQVosR0FDQSxNQUFBQSxJQUNBLE1BQUFBLEVBQUFuRSxZQUNBbUssRUFBQXFELGFBQUFySixNQUFBRyxTQUFBLDJCQUNBNkYsRUFBQXFELGFBQUFsSixTQUFBLElBRUE2RixFQUFBcUQsYUFBQXJKLE1BQUEzRSxLQUFBLHFCQUFBMkssRUFBQXFELGFBQUFqUSxJQUFBaUMsS0FBQSw4QkFHQTJLLEVBQUFxRCxhQUFBVixNQUFBLEtBSUEzQyxFQUFBcUQsYUFBQVYsTUFBQSxFQUVBekIsRUFBQSxzQkFBQUMsTUFBQSxZQUVBbkIsR0FBQXdELFlBSUF4RCxFQUFBZ0UsY0FBQSxTQUFBNVEsR0FDQTRNLEVBQUF3RCxRQUVBeEQsRUFBQXNELGFBQUFsUSxJQUFBQSxFQUVBOE4sRUFBQSxzQkFBQUMsTUFBQSxTQUdBbkIsRUFBQWlFLFlBQUEsV0FDQWpFLEVBQUFzRCxhQUFBdEosTUFBQUcsU0FBQSxLQUVBeEQsRUFBQWtFLGFBQUFtRixFQUFBc0QsYUFBQWxRLElBQUFrSCxHQUFBMEYsRUFBQXNELGFBQUFuSixTQUFBLFNBQUFILEdBQ0EsTUFBQUEsUUFDQSxNQUFBQSxFQUFBbkUsWUFDQW1LLEVBQUFzRCxhQUFBbkosU0FBQSxHQUNBNkYsRUFBQXNELGFBQUF0SixNQUFBRyxVQUFBLEdBRUEwQyxRQUFBN0MsTUFBQUEsS0FLQWtILEVBQUEsc0JBQUFDLE1BQUEsWUFFQW5CLEdBQUF3RCxZQUlBeEQsRUFBQWtFLFdBQUEsU0FBQTlRLEdBQ0E0TSxFQUFBdUQsVUFBQW5RLElBQUFBLEVBQ0E0TSxFQUFBdUQsVUFBQXZKLE1BQUFHLFNBQUEsS0FFQXVGLEVBQUFJLFlBQUExTSxFQUFBcUgsV0FBQSxTQUFBVCxFQUFBTyxHQUNBLEdBQUFQLEVBQUEsTUFBQTZDLFNBQUE3QyxNQUFBQSxFQU1BZ0csR0FBQXVELFVBQUFoSixTQUFBQSxFQUNBeUYsRUFBQXVELFVBQUE1SSxhQUFBdEgsUUFBQXVMLEtBQUF4TCxFQUFBdUgsYUFHQSxLQUFBLEdBQUFtSixLQUFBOUQsR0FBQXVELFVBQUFoSixTQUFBcUosU0FDQTVELEVBQUF1RCxVQUFBNUksYUFBQW1KLEdBQUE5RCxFQUFBdUQsVUFBQWhKLFNBQUFxSixTQUFBRSxHQUNBOUQsRUFBQXVELFVBQUE1SSxhQUFBbUosR0FBQUssT0FBQW5FLEVBQUF1RCxVQUFBblEsSUFBQXVILGFBQUFtSixFQUlBLEtBQUFBLElBQUE5RCxHQUFBdUQsVUFBQW5RLElBQUF1SCxhQUNBcUYsRUFBQXVELFVBQUFoSixTQUFBcUosU0FBQUUsS0FDQTlELEVBQUF1RCxVQUFBNUksYUFBQW1KLEdBQUFNLFlBQUEsRUFHQWxELEdBQUEsbUJBQUFDLE1BQUEsV0FJQW5CLEVBQUFvQixTQUFBLFNBQUFMLEdBQ0FmLEVBQUF1RCxVQUFBdkosTUFBQUcsU0FBQSxLQUVBeEQsRUFBQXFFLFVBQUFnRixFQUFBdUQsVUFBQW5RLElBQUFrSCxHQUFBMEYsRUFBQXVELFVBQUFoSixTQUFBeUYsRUFBQXVELFVBQUE1SSxhQUFBcUYsRUFBQXVELFVBQUFwSixTQUFBLFNBQUFILEdBQ0EsTUFBQUEsUUFDQSxNQUFBQSxFQUFBbkUsWUFDQW1LLEVBQUF1RCxVQUFBcEosU0FBQSxHQUNBNkYsRUFBQXVELFVBQUF2SixNQUFBRyxVQUFBLEdBRUEwQyxRQUFBN0MsTUFBQUEsS0FLQWdHLEVBQUF1RCxVQUFBblEsT0FDQTRNLEVBQUF1RCxVQUFBcEosU0FBQSxHQUVBNEcsRUFBQUMsZUFDQUQsRUFBQUUsb0JBRUFDLEdBQUEsbUJBQUFDLE1BQUEsWUFJQW5CLEVBQUEyQixPQUFBLFdBQ0E3QyxPQUFBdUYsUUFBQUMsU0FJQSxvQkFBQSxvQkFBQSxrQkFBQTdMLFFBQUEsU0FBQTZCLEdBQ0E0RyxFQUFBLElBQUE1RyxHQUFBc0gsR0FBQSxpQkFBQSxXQUNBVixFQUFBakwsTUFBQTRMLEtBQUEscUJBQUFDLGVIcExBek8sUUFBQUMsT0FBQSxlQUFBSyxXQUFBLHNCQUFBLFNBQUEsWUFBQSxXQUFBLFNBQUEsV0FBQSxTQUFBcU0sRUFBQStCLEVBQUF3QyxFQUFBNU4sRUFBQStJLEdBcUZBLFFBQUE4RSxLQUNBeEUsRUFBQXlFLE9BQUEsRUFFQS9FLEVBQUFsRSxRQUFBLFNBQUF4QixFQUFBbEMsR0FDQSxNQUFBa0MsSUFDQTZDLFFBQUE3QyxNQUFBQSxHQUNBdUssRUFBQUMsRUFBQSxPQUdBeEUsRUFBQWxJLEtBQUFBLE9BQ0FrSSxFQUFBeUUsT0FBQSxNQTlGQTlOLEVBQUErQixRQUFBLFdBQUEvQixFQUFBNEMsY0FBQXJDLE9BQUE2SyxFQUFBMkMsS0FBQSxPQUVBMUUsRUFBQXlFLE9BQUEsRUFDQXpFLEVBQUFsSSxRQUNBa0ksRUFBQXpNLE9BQUFvRCxFQUFBNkMsWUFFQXdHLEVBQUEyRSxZQUNBaEMsTUFBQSxFQUNBM0ksU0FDQTVHLE9BQ0FzSCxTQUFBLEdBQ0FQLFNBQUEsR0FDQVEsZ0JBQ0FDLGtCQUFBLElBR0FvRixFQUFBd0QsTUFBQSxXQUNBeEQsRUFBQTJFLFdBQUF2UixPQUNBNE0sRUFBQTJFLFdBQUFqSyxTQUFBLEdBQ0FzRixFQUFBMkUsV0FBQXhLLFNBQUEsR0FDQTZGLEVBQUEyRSxXQUFBaEssZ0JBQ0FxRixFQUFBMkUsV0FBQS9KLGtCQUFBLEdBQ0FvRixFQUFBMkUsV0FBQTNLLFNBRUFnRyxFQUFBNEUsYUFBQTVELGVBQ0FoQixFQUFBNEUsYUFBQTNELGlCQUdBakIsRUFBQTZFLFlBQUEsU0FBQXpSLEdBQ0E0TSxFQUFBd0QsUUFFQTlELEVBQUFJLFlBQUExTSxFQUFBa0gsR0FBQSxTQUFBTixFQUFBTyxHQUNBLE1BQUFQLEdBQUE2QyxRQUFBN0MsTUFBQUEsSUFHQTVHLEVBQUFtSCxTQUFBQSxFQUVBeUYsRUFBQTJFLFdBQUF2UixJQUFBQSxFQUNBNE0sRUFBQTJFLFdBQUFqSyxTQUFBdEgsRUFBQXNILFNBQ0FzRixFQUFBMkUsV0FBQWhLLGFBQUFKLEVBQUFxSixTQUNBNUQsRUFBQTJFLFdBQUEvSixrQkFBQXhILEVBQUF3SCxtQkFBQSxPQUVBc0csR0FBQSxvQkFBQUMsTUFBQSxZQUlBbkIsRUFBQThFLFVBQUEsV0FDQTlFLEVBQUEyRSxXQUFBaEMsTUFBQSxFQUNBM0MsRUFBQTJFLFdBQUEzSyxNQUFBM0UsS0FBQSxLQUNBMkssRUFBQTJFLFdBQUEzSyxNQUFBRyxTQUFBLEtBQ0E2RixFQUFBMkUsV0FBQTNLLE1BQUErSyxLQUFBLElBRUEsSUFBQXBLLEtBQ0EsS0FBQSxHQUFBbUosS0FBQTlELEdBQUEyRSxXQUFBaEssYUFDQUEsRUFBQW1KLEdBQUE5RCxFQUFBMkUsV0FBQWhLLGFBQUFtSixHQUFBQyxRQUdBcE4sR0FBQTBELFdBQUEyRixFQUFBMkUsV0FBQXZSLElBQUFrSCxHQUFBMEYsRUFBQTJFLFdBQUF2UixJQUFBbUgsU0FBQXlGLEVBQUEyRSxXQUFBeEssU0FBQTZGLEVBQUEyRSxXQUFBdlIsSUFBQW9ILE9BQUFFLFNBQUFzRixFQUFBMkUsV0FBQWpLLFNBQUFDLGFBQUFBLEVBQUFDLGtCQUFBb0YsRUFBQTJFLFdBQUEvSixtQkFBQSxTQUFBWixHQUNBLE1BQUFBLElBQ0EsTUFBQUEsRUFBQW5FLFlBQUEsS0FBQW1FLEVBQUFsRSxRQUFBMEssUUFBQSxlQUNBUixFQUFBMkUsV0FBQTNLLE1BQUErSyxLQUFBLCtCQUNBLE1BQUEvSyxFQUFBbkUsV0FDQW1LLEVBQUEyRSxXQUFBM0ssTUFBQTNFLEtBQUEsOEJBQ0EsTUFBQTJFLEVBQUFuRSxZQUNBbUssRUFBQTJFLFdBQUEzSyxNQUFBRyxTQUFBLDJCQUNBNkYsRUFBQTJFLFdBQUF4SyxTQUFBLElBRUE2RixFQUFBMkUsV0FBQTNLLE1BQUEzRSxLQUFBLHFCQUFBMkssRUFBQTJFLFdBQUF2UixJQUFBaUMsS0FBQSw2QkFHQTJLLEVBQUEyRSxXQUFBaEMsTUFBQSxLQUlBM0MsRUFBQTJFLFdBQUFoQyxNQUFBLEVBRUF6QixFQUFBLG9CQUFBQyxNQUFBLFFBRUFuQixFQUFBd0QsWUFFQXpCLEdBQUEyQyxLQUFBLGFBa0JBRixLQUdBLG1CQUFBL0wsUUFBQSxTQUFBNkIsR0FDQTRHLEVBQUEsSUFBQTVHLEdBQUFzSCxHQUFBLGlCQUFBLFdBQ0FWLEVBQUFqTCxNQUFBNEwsS0FBQSxxQkFBQUMsZUl4R0F6TyxRQUFBQyxPQUFBLGVBQUFLLFdBQUEsaUJBQUEsU0FBQSxZQUFBLFNBQUEsU0FBQXFNLEVBQUErQixFQUFBcEwsR0FDQUEsRUFBQStCLFFBQUEsV0FBQS9CLEVBQUE0QyxjQUFBckMsT0FBQTZLLEVBQUEyQyxLQUFBLE9BRUExRSxFQUFBeUUsT0FBQSxFQUNBekUsRUFBQXdDLEtBQUE3TCxFQUFBNEMsY0FDQXlHLEVBQUF6TSxPQUFBb0QsRUFBQTZDLFlBQ0F3RyxFQUFBZ0YsZUFBQSxLQUNBaEYsRUFBQXJELGdCQUFBLEtBQ0FxRCxFQUFBaUYsb0JBQUEsR0FDQWpGLEVBQUFwRCxRQUFBLEtBQ0FvRCxFQUFBa0YsWUFBQSxHQUVBbEYsRUFBQXpFLGVBQUEsV0FDQSxHQUFBRCxHQUFBMEUsRUFBQWdGLGVBQUFoRixFQUFBZ0YsZUFBQTFLLEdBQUEsT0FFQTNELEdBQUE0RSxlQUFBRCxFQUFBLFNBQUF0QixHQUNBLE1BQUFBLEdBQUE2QyxRQUFBN0MsTUFBQSw2QkFBQUEsR0FBQSxVQUlBZ0csRUFBQXZELE9BQUEsV0FDQXlFLEVBQUEsd0JBQUFDLE1BQUEsUUFDQW5CLEVBQUFtRixRQUFBaEYsYUFBQSxFQUVBeEosRUFBQThGLE9BQUEsU0FBQXpDLEdBSUEsUUFBQXFILEtBQ0ExSyxFQUFBeUMsUUFBQSxTQUFBWSxHQUNBLE1BQUFBLEdBQUE4RSxPQUFBd0MsV0FBQUQsRUFBQSxNQUVBSCxFQUFBLHdCQUFBQyxNQUFBLGFBQ0FuQixFQUFBbUYsUUFBQWhGLGFBQUEsTUFSQW5HLEdBQUE2QyxRQUFBN0MsTUFBQUEsR0FZQThFLE9BQUF3QyxXQUFBRCxFQUFBLFFBSUFyQixFQUFBcEksT0FBQSxXQUNBc0osRUFBQSxnQkFBQUMsTUFBQSxRQUVBbkIsRUFBQW1GLFFBQUFoRixhQUFBLEVBRUF4SixFQUFBaUIsT0FBQSxTQUFBb0MsR0FDQUEsR0FBQTZDLFFBQUE3QyxNQUFBQSxHQUVBOEUsT0FBQXBFLFNBQUFxRSxLQUFBLGtCQUlBcUcsU0FBQUMsZUFBQSxpQkFBQUMsU0FBQSxTQUFBN0UsR0FDQVQsRUFBQXVGLE9BQUEsV0FDQXZGLEVBQUFyRCxnQkFBQThELEVBQUEvQyxPQUFBOEgsTUFBQSxHQUNBeEYsRUFBQWlGLG9CQUFBeEUsRUFBQS9DLE9BQUE4SCxNQUFBLEdBQUFuUSxRQUlBK1AsU0FBQUMsZUFBQSxTQUFBQyxTQUFBLFNBQUE3RSxHQUNBVCxFQUFBdUYsT0FBQSxXQUNBdkYsRUFBQXBELFFBQUE2RCxFQUFBL0MsT0FBQThILE1BQUEsR0FDQXhGLEVBQUFrRixZQUFBekUsRUFBQS9DLE9BQUE4SCxNQUFBLEdBQUFuUSxRQUlBMkssRUFBQXRELGVBQUEsV0FHQSxNQUZBRyxTQUFBQyxJQUFBLDRCQUVBa0QsRUFBQXJELGdCQUNBcUQsRUFBQXBELFlBRUFqRyxHQUFBK0YsZUFBQXNELEVBQUFyRCxnQkFBQXFELEVBQUFwRCxRQUFBLFNBQUE1QyxHQUNBLE1BQUFBLEdBQUE2QyxRQUFBQyxJQUFBOUMsT0FFQThFLFFBQUF3QyxXQUFBeEMsT0FBQXBFLFNBQUErSyxPQUFBaEUsS0FBQTNDLE9BQUFwRSxVQUFBLEdBQUEsT0FMQW1DLFFBQUFDLElBQUEsZUFEQUQsUUFBQUMsSUFBQSx3QkFVQW5HLEVBQUFpQyxTQUFBLFdBQ0FvSCxFQUFBMEMsV0FBQS9MLEVBQUFRLE9BRUFSLEVBQUE2RSxRQUFBLFNBQUF4QixFQUFBbEMsR0FDQWtDLEdBQUE2QyxRQUFBN0MsTUFBQSwwQkFDQWdHLEVBQUFsSSxLQUFBQSxFQUVBbkIsRUFBQTBFLGVBQUEsU0FBQXJCLEVBQUFzQixHQUNBLEdBQUF0QixFQUFBLE1BQUE2QyxTQUFBN0MsTUFBQUEsRUFFQWdHLEdBQUFnRixlQUFBLElBQ0EsS0FBQSxHQUFBdEcsR0FBQSxFQUFBQSxFQUFBc0IsRUFBQWxJLEtBQUE2RyxPQUFBRCxJQUNBLEdBQUFzQixFQUFBbEksS0FBQTRHLEdBQUFwRSxLQUFBZ0IsRUFBQSxDQUNBMEUsRUFBQWdGLGVBQUFoRixFQUFBbEksS0FBQTRHLEVBQ0EsT0FJQXNCLEVBQUF5RSxPQUFBLFdDaEdBcFIsUUFBQUMsT0FBQSxlQUFBSyxXQUFBLG9CQUFBLFNBQUEsWUFBQSxTQUFBLFNBQUFxTSxFQUFBK0IsRUFBQXBMLEdBZ0JBLFFBQUErTyxHQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEtBRUFELElBQUFBLEVBQUFFLGFBQUFELEVBQUFELEVBQUFFLFdBQUFDLElBQUEsU0FBQUMsR0FBQSxPQUFBQyxFQUFBRCxFQUFBLEdBQUFFLEVBQUFGLEVBQUEsTUFFQSxFQUFBLEdBQUFHLEdBQUEsR0FBQUMsVUFBQUMsT0FDQUMsUUFBQWxCLFNBQUFtQixjQUFBLElBQUFaLEVBQUEsWUFDQWEsU0FBQSxPQUNBQyxNQUFBLElBQ0FDLE9BQUEsSUFDQUMsSUFBQSxFQUNBQyxJQUFBLElBQ0FDLFNBQ0FDLE1BQUEsWUFDQXZRLEtBQUFzUCxFQUNBeFEsS0FBQSxTQUlBLElBQUErUSxVQUFBQyxNQUFBVSxLQUFBQyxNQUFBQyxNQUFBZCxJQUNBLEdBQUFDLFVBQUFDLE1BQUFVLEtBQUFHLEdBQ0FELE1BQUFkLEVBQ0FnQixZQUFBLE9BQ0FDLFdBQUFoQixTQUFBaUIsU0FBQUMsT0FBQUMsV0FDQWpCLFFBQUFsQixTQUFBQyxlQUFBTSxFQUFBLGNBR0EsR0FBQVMsVUFBQUMsTUFBQW1CLGFBQ0FQLE1BQUFkLEVBQ0FzQixVQUFBLFNBQUFaLEVBQUFYLEVBQUFELEdBQ0EsR0FBQXlCLEdBQUEsd0RBQUFiLEVBQUFDLE1BQUEsWUFDQWEsRUFBQUQsRUFBQWIsRUFBQXhSLEtBQUEsS0FBQSxHQUFBaVMsUUFBQXJCLEdBQUEyQixRQUFBLEdBQUEsT0FDQSxPQUFBRCxNQUlBeEIsRUFBQTBCLFNBR0EsUUFBQUMsR0FBQW5DLEVBQUFvQyxFQUFBQyxHQUNBLEdBQUFDLE1BQUFDLElBRUFILElBQUFBLEVBQUFqQyxhQUFBbUMsRUFBQUYsRUFBQWpDLFdBQUFDLElBQUEsU0FBQUMsR0FBQSxPQUFBQyxFQUFBRCxFQUFBLEdBQUFFLEVBQUFGLEVBQUEsT0FDQWdDLEdBQUFBLEVBQUFsQyxhQUFBb0MsRUFBQUYsRUFBQWxDLFdBQUFDLElBQUEsU0FBQUMsR0FBQSxPQUFBQyxFQUFBRCxFQUFBLEdBQUFFLEVBQUFGLEVBQUEsTUFFQSxFQUFBLEdBQUFtQyxHQUFBLEdBQUEvQixVQUFBQyxPQUNBQyxRQUFBbEIsU0FBQW1CLGNBQUEsSUFBQVosRUFBQSxnQkFDQWEsU0FBQSxPQUNBQyxNQUFBLElBQ0FDLE9BQUEsSUFDQUcsU0FDQUMsTUFBQSxZQUNBdlEsS0FBQTBSLEVBQ0E1UyxLQUFBLE9BRUF5UixNQUFBLFFBQ0F2USxLQUFBMlIsRUFDQTdTLEtBQUEsUUFJQSxJQUFBK1EsVUFBQUMsTUFBQVUsS0FBQUMsTUFBQUMsTUFBQWtCLElBQ0EsR0FBQS9CLFVBQUFDLE1BQUFVLEtBQUFHLEdBQ0FELE1BQUFrQixFQUNBaEIsWUFBQSxPQUNBQyxXQUFBaEIsU0FBQWlCLFNBQUFDLE9BQUFDLFdBQ0FqQixRQUFBbEIsU0FBQUMsZUFBQU0sRUFBQSxrQkFHQSxHQUFBUyxVQUFBQyxNQUFBbUIsYUFDQVAsTUFBQWtCLEVBQ0FWLFVBQUEsU0FBQVosRUFBQVgsRUFBQUQsR0FDQSxHQUFBeUIsR0FBQSx3REFBQWIsRUFBQUMsTUFBQSxZQUNBYSxFQUFBRCxFQUFBYixFQUFBeFIsS0FBQSxLQUFBLEdBQUFpUyxRQUFBckIsRUFBQSxNQUFBMkIsUUFBQSxHQUFBLFFBQ0EsT0FBQUQsTUFJQVEsRUFBQU4sU0FHQSxRQUFBTyxHQUFBekMsRUFBQTBDLEVBQUFDLEdBQ0EsR0FBQUMsTUFBQUMsSUFFQUgsSUFBQUEsRUFBQXZDLGFBQ0F5QyxFQUFBRixFQUFBdkMsV0FBQUMsSUFBQSxTQUFBQyxHQUFBLE9BQUFDLEVBQUFELEVBQUEsR0FBQUUsRUFBQUYsRUFBQSxPQUdBc0MsR0FBQUEsRUFBQXhDLGFBQ0EwQyxFQUFBRixFQUFBeEMsV0FBQUMsSUFBQSxTQUFBQyxHQUFBLE9BQUFDLEVBQUFELEVBQUEsR0FBQUUsRUFBQUYsRUFBQSxNQUdBLEVBQUEsR0FBQXlDLEdBQUEsR0FBQXJDLFVBQUFDLE9BQ0FDLFFBQUFsQixTQUFBbUIsY0FBQSxJQUFBWixFQUFBLGFBQ0FhLFNBQUEsT0FDQUMsTUFBQSxJQUNBQyxPQUFBLElBQ0FDLElBQUEsRUFDQUMsSUFBQSxZQUNBQyxTQUNBQyxNQUFBLFlBQ0F2USxLQUFBZ1MsRUFDQWxULEtBQUEsU0FFQXlSLE1BQUEsUUFDQXZRLEtBQUFpUyxFQUNBblQsS0FBQSxVQUlBLElBQUErUSxVQUFBQyxNQUFBVSxLQUFBQyxNQUFBQyxNQUFBd0IsSUFDQSxHQUFBckMsVUFBQUMsTUFBQVUsS0FBQUcsR0FDQUQsTUFBQXdCLEVBQ0F0QixZQUFBLE9BQ0FDLFdBQUFoQixTQUFBaUIsU0FBQUMsT0FBQUMsV0FDQWpCLFFBQUFsQixTQUFBQyxlQUFBTSxFQUFBLGVBR0EsR0FBQVMsVUFBQUMsTUFBQW1CLGFBQ0FQLE1BQUF3QixFQUNBaEIsVUFBQSxTQUFBWixFQUFBWCxFQUFBRCxHQUNBLEdBQUF5QixHQUFBLHdEQUFBYixFQUFBQyxNQUFBLFlBQ0FhLEVBQUFELEVBQUFiLEVBQUF4UixLQUFBLEtBQUEsR0FBQWlTLFFBQUFyQixFQUFBLFlBQUEyQixRQUFBLEdBQUEsUUFDQSxPQUFBRCxNQUlBLEdBQUF2QixVQUFBQyxNQUFBcUMsUUFDQXpCLE1BQUF3QixFQUNBbkMsUUFBQWxCLFNBQUFDLGVBQUFNLEVBQUEsZ0JBR0E4QyxFQUFBWixTQW5KQWxSLEVBQUE0QyxjQUFBckMsT0FBQTZLLEVBQUEyQyxLQUFBLEtBRUExRSxFQUFBMkYsVUFBQSxLQUVBLElBQUFnRCxHQUFBLHdWQUtBQyxFQUFBLG1FQUNBQyxFQUFBLG1FQUVBQyxFQUFBLGdFQUNBQyxFQUFBLCtEQXlJQS9JLEdBQUFnSixhQUFBLFdBQ0EsR0FBQXJELEdBQUEzRixFQUFBMkYsVUFDQW5JLEVBQUEsVUFDQSxRQUFBbUksR0FDQSxJQUFBLE1BQUFuSSxFQUFBLFVBQUEsTUFDQSxLQUFBLFFBQUFBLEVBQUEsU0FBQSxNQUNBLEtBQUEsT0FBQUEsRUFBQSxRQUFBLE1BQ0EsU0FBQVgsUUFBQUMsSUFBQSxtQkFHQW5HLEVBQUEyRyxRQUFBcUwsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FBQXZMLEVBQUEsU0FBQXhELEVBQUF6RCxHQUNBLE1BQUF5RCxHQUFBNkMsUUFBQUMsSUFBQTlDLElBRUEwTCxFQUFBQyxFQUFBcFAsRUFBQSxJQUVBdVIsRUFBQW5DLEVBQUFwUCxFQUFBLEdBQUFBLEVBQUEsUUFFQTZSLEdBQUF6QyxFQUFBcFAsRUFBQSxHQUFBQSxFQUFBLFFBSUFJLEVBQUErQixRQUFBc0gsRUFBQWdKLGlCQzlLQTNWLFFBQUFDLE9BQUEsZUFBQUssV0FBQSxtQkFBQSxTQUFBLFlBQUEsU0FBQSxTQUFBcU0sRUFBQStCLEVBQUFwTCxHQTJHQSxRQUFBNk4sS0FDQTdOLEVBQUF5RixVQUFBLFNBQUFwQyxFQUFBdUUsR0FDQSxNQUFBdkUsR0FBQTZDLFFBQUE3QyxNQUFBLDhCQUFBQSxJQUVBZ0csRUFBQWlKLE1BQUExSyxFQUFBMEssV0FDQWpKLEVBQUF5RSxPQUFBLE1BL0dBOU4sRUFBQStCLFFBQUEsV0FBQS9CLEVBQUE0QyxjQUFBckMsT0FBQTZLLEVBQUEyQyxLQUFBLE9BRUExRSxFQUFBeUUsT0FBQSxFQUNBekUsRUFBQWlKLFNBQ0FqSixFQUFBbEgsU0FBQW5DLEVBQUE0QyxjQUVBeUcsRUFBQWtKLFlBQ0F2RyxNQUFBLEVBQ0EzSSxTQUNBbEIsWUFDQTlCLFNBQUEsR0FDQW1ELFNBQUEsSUFHQTZGLEVBQUFtSixTQUNBeEcsTUFBQSxFQUNBeUcsY0FBQSxFQUNBcFAsU0FDQWhELFNBQUEsR0FDQUMsTUFBQSxJQUdBK0ksRUFBQXFKLEtBQUEsU0FBQTdHLEdBQ0EsTUFBQUEsR0FBQXhMLFdBQUFMLEVBQUE0QyxjQUFBdkMsVUFHQWdKLEVBQUFzSixRQUFBLFNBQUE5RyxHQUNBLFFBQUFBLEVBQUF0TCxPQUdBOEksRUFBQXVKLFlBQUEsU0FBQS9HLEdBQ0E3TCxFQUFBcUYsU0FBQXdHLEVBQUF4TCxVQUFBd0wsRUFBQXRMLE1BQUEsU0FBQThDLEdBQ0EsTUFBQUEsR0FBQTZDLFFBQUE3QyxNQUFBQSxRQUVBd0ksRUFBQXRMLE9BQUFzTCxFQUFBdEwsVUFJQThJLEVBQUF3SixNQUFBLFdBQ0F4SixFQUFBbUosUUFBQUMsYUFBQSxHQUNBcEosRUFBQW1KLFFBQUFuUCxNQUFBaEQsU0FBQSxLQUNBZ0osRUFBQW1KLFFBQUFuUCxNQUFBL0MsTUFBQSxLQUVBTixFQUFBaUgsV0FBQW9DLEVBQUFtSixRQUFBblMsU0FBQWdKLEVBQUFtSixRQUFBbFMsTUFBQSxTQUFBK0MsR0FDQSxHQUFBQSxHQUFBLE1BQUFBLEVBQUFuRSxXQUVBLE1BREFtSyxHQUFBbUosUUFBQUMsYUFBQXBKLEVBQUFoSixTQUNBNkYsUUFBQTdDLE1BQUEseUJBRUEsSUFBQUEsR0FBQSxNQUFBQSxFQUFBbkUsV0FBQSxDQUNBLEdBQUEsS0FBQW1FLEVBQUFsRSxRQUFBMEssUUFBQSxTQUdBLE1BRkFSLEdBQUFtSixRQUFBblAsTUFBQS9DLE1BQUEscUJBQ0ErSSxFQUFBbUosUUFBQWxTLE1BQUEsR0FHQSxJQUFBLEtBQUErQyxFQUFBbEUsUUFBQTBLLFFBQUEsWUFHQSxNQUZBUixHQUFBbUosUUFBQW5QLE1BQUFoRCxTQUFBLHdCQUNBZ0osRUFBQW1KLFFBQUFuUyxTQUFBLFFBS0FnRCxJQUFBNkMsUUFBQTdDLE1BQUEseUJBQUFBLEdBRUF3SyxJQUNBdEQsRUFBQSxpQkFBQUMsTUFBQSxXQUlBbkIsRUFBQXlKLGVBQUEsU0FBQTNRLEdBQ0FrSCxFQUFBa0osV0FBQWxQLE1BQUFoRCxTQUFBLEtBQ0FnSixFQUFBa0osV0FBQWxQLE1BQUFHLFNBQUEsS0FDQTZGLEVBQUFrSixXQUFBcFEsU0FBQUEsRUFDQW9JLEVBQUEsb0JBQUFDLE1BQUEsU0FHQW5CLEVBQUEwSixhQUFBLFNBQUEzSSxHQUlBLE1BSEFmLEdBQUFrSixXQUFBbFAsTUFBQWhELFNBQUEsS0FDQWdKLEVBQUFrSixXQUFBbFAsTUFBQUcsU0FBQSxLQUVBNkYsRUFBQWtKLFdBQUFsUyxXQUFBZ0osRUFBQWtKLFdBQUFwUSxTQUFBOUIsVUFDQWdKLEVBQUFrSixXQUFBbFAsTUFBQWhELFNBQUEsK0JBQ0FnSixFQUFBa0osV0FBQWxTLFNBQUEsU0FJQUwsR0FBQWtILFdBQUFtQyxFQUFBa0osV0FBQXBRLFNBQUF3QixHQUFBMEYsRUFBQWtKLFdBQUEvTyxTQUFBLFNBQUFILEdBQ0EsTUFBQUEsSUFBQSxNQUFBQSxFQUFBbkUsWUFDQW1LLEVBQUFrSixXQUFBbFAsTUFBQUcsU0FBQSwwQkFDQTZGLEVBQUFrSixXQUFBL08sU0FBQSxLQUdBSCxFQUFBNkMsUUFBQTdDLE1BQUEseUJBQUFBLElBRUFnRyxFQUFBa0osV0FBQXBRLFlBQ0FrSCxFQUFBa0osV0FBQWxTLFNBQUEsR0FDQWdKLEVBQUFrSixXQUFBL08sU0FBQSxHQUVBNEcsRUFBQUMsZUFDQUQsRUFBQUUsZ0JBRUFDLEVBQUEsb0JBQUFDLE1BQUEsWUFFQXFELFNBYUFBLEtBR0EsZUFBQSxtQkFBQS9MLFFBQUEsU0FBQTZCLEdBQ0E0RyxFQUFBLElBQUE1RyxHQUFBc0gsR0FBQSxpQkFBQSxXQUNBVixFQUFBakwsTUFBQTRMLEtBQUEscUJBQUFDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgYW5ndWxhcjpmYWxzZSAqL1xuXG4vLyBjcmVhdGUgbWFpbiBhcHBsaWNhdGlvbiBtb2R1bGVcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbJ25nUm91dGUnLCAnbmdBbmltYXRlJywgJ2FuZ3VsYXItbWQ1J10pO1xuXG4vLyBzZXR1cCBhbGwgbWFqb3IgYXBwbGljYXRpb24gcm91dGVzXG5hcHAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvJywge1xuICAgICAgICByZWRpcmVjdFRvOiAnL2FwcHMnXG4gICAgfSkud2hlbignL3VzZXJzJywge1xuICAgICAgICBjb250cm9sbGVyOiAnVXNlcnNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2Vycy5odG1sJ1xuICAgIH0pLndoZW4oJy9hcHBzdG9yZScsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcFN0b3JlQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYXBwc3RvcmUuaHRtbCdcbiAgICB9KS53aGVuKCcvYXBwcycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcHNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hcHBzLmh0bWwnXG4gICAgfSkud2hlbignL2RucycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0Ruc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Rucy5odG1sJ1xuICAgIH0pLndoZW4oJy9hY2NvdW50Jywge1xuICAgICAgICBjb250cm9sbGVyOiAnQWNjb3VudENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FjY291bnQuaHRtbCdcbiAgICB9KS53aGVuKCcvZ3JhcGhzJywge1xuICAgICAgICBjb250cm9sbGVyOiAnR3JhcGhzQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZ3JhcGhzLmh0bWwnXG4gICAgfSkub3RoZXJ3aXNlKHsgcmVkaXJlY3RUbzogJy8nfSk7XG59XSk7XG5cbi8vIGtlZXAgaW4gc3luYyB3aXRoIGFwcGRiLmpzXG52YXIgSVNUQVRFUyA9IHtcbiAgICBJU1RBVEVfUEVORElOR19JTlNUQUxMOiAncGVuZGluZ19pbnN0YWxsJyxcbiAgICBJU1RBVEVfUEVORElOR19DT05GSUdVUkU6ICdwZW5kaW5nX2NvbmZpZ3VyZScsXG4gICAgSVNUQVRFX1BFTkRJTkdfVU5JTlNUQUxMOiAncGVuZGluZ191bmluc3RhbGwnLFxuICAgIElTVEFURV9QRU5ESU5HX1JFU1RPUkU6ICdwZW5kaW5nX3Jlc3RvcmUnLFxuICAgIElTVEFURV9QRU5ESU5HX1VQREFURTogJ3BlbmRpbmdfdXBkYXRlJyxcbiAgICBJU1RBVEVfRVJST1I6ICdlcnJvcicsXG4gICAgSVNUQVRFX0lOU1RBTExFRDogJ2luc3RhbGxlZCdcbn07XG5cbmFwcC5maWx0ZXIoJ2luc3RhbGxhdGlvbkFjdGl2ZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQgPT09IElTVEFURVMuSVNUQVRFX0VSUk9SKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gSVNUQVRFUy5JU1RBVEVfSU5TVEFMTEVEKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59KTtcblxuYXBwLmZpbHRlcignaW5zdGFsbGF0aW9uU3RhdGVMYWJlbCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBzd2l0Y2ggKGlucHV0KSB7XG4gICAgICAgIGNhc2UgSVNUQVRFUy5JU1RBVEVfUEVORElOR19JTlNUQUxMOiByZXR1cm4gJ0luc3RhbGxpbmcnO1xuICAgICAgICBjYXNlIElTVEFURVMuSVNUQVRFX1BFTkRJTkdfQ09ORklHVVJFOiByZXR1cm4gJ0NvbmZpZ3VyaW5nJztcbiAgICAgICAgY2FzZSBJU1RBVEVTLklTVEFURV9QRU5ESU5HX1VOSU5TVEFMTDogcmV0dXJuICdVbmluc3RhbGxpbmcnO1xuICAgICAgICBjYXNlIElTVEFURVMuSVNUQVRFX1BFTkRJTkdfUkVTVE9SRTogcmV0dXJuICdTdGFydGluZyc7XG4gICAgICAgIGNhc2UgSVNUQVRFUy5JU1RBVEVfUEVORElOR19VUERBVEU6IHJldHVybiAnVXBkYXRpbmcnO1xuICAgICAgICBjYXNlIElTVEFURVMuSVNUQVRFX0VSUk9SOiByZXR1cm4gJ0Vycm9yJztcbiAgICAgICAgY2FzZSBJU1RBVEVTLklTVEFURV9JTlNUQUxMRUQ6IHJldHVybiAnUnVubmluZyc7XG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBpbnB1dDtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuYXBwLmZpbHRlcignYWNjZXNzUmVzdHJpY3Rpb25MYWJlbCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQgPT09ICcnKSByZXR1cm4gJ3B1YmxpYyc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3JvbGVVc2VyJykgcmV0dXJuICdwcml2YXRlJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncm9sZUFkbWluJykgcmV0dXJuICdwcml2YXRlIChBZG1pbnMgb25seSknO1xuXG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9O1xufSk7XG5cbi8vIGN1c3RvbSBkaXJlY3RpdmUgZm9yIGR5bmFtaWMgbmFtZXMgaW4gZm9ybXNcbi8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzIzNjE2NTc4L2lzc3VlLXJlZ2lzdGVyaW5nLWZvcm0tY29udHJvbC13aXRoLWludGVycG9sYXRlZC1uYW1lI2Fuc3dlci0yMzYxNzQwMVxuYXBwLmRpcmVjdGl2ZSgnbGF0ZXJOYW1lJywgZnVuY3Rpb24gKCkgeyAgICAgICAgICAgICAgICAgICAvLyAoMilcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICByZXF1aXJlOiBbJz9uZ01vZGVsJywgJ14/Zm9ybSddLCAgICAgICAgICAgICAgICAgICAvLyAoMylcbiAgICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW0sIGF0dHJzLCBjdHJscykge1xuICAgICAgICAgICAgYXR0cnMuJHNldCgnbmFtZScsIGF0dHJzLmxhdGVyTmFtZSk7XG5cbiAgICAgICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXTsgICAgICAgICAgICAgICAgICAgICAgLy8gKDMpXG4gICAgICAgICAgICB2YXIgZm9ybUN0cmwgID0gY3RybHNbMV07ICAgICAgICAgICAgICAgICAgICAgIC8vICgzKVxuICAgICAgICAgICAgaWYgKG1vZGVsQ3RybCAmJiBmb3JtQ3RybCkge1xuICAgICAgICAgICAgICAgIG1vZGVsQ3RybC4kbmFtZSA9IGF0dHJzLm5hbWU7ICAgICAgICAgICAgICAvLyAoNClcbiAgICAgICAgICAgICAgICBmb3JtQ3RybC4kYWRkQ29udHJvbChtb2RlbEN0cmwpOyAgICAgICAgICAgLy8gKDIpXG4gICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybUN0cmwuJHJlbW92ZUNvbnRyb2wobW9kZWxDdHJsKTsgICAgLy8gKDUpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qIGdsb2JhbCBhbmd1bGFyICovXG4vKiBnbG9iYWwgRXZlbnRTb3VyY2UgKi9cblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuc2VydmljZSgnQ2xpZW50JywgWyckaHR0cCcsICdtZDUnLCBmdW5jdGlvbiAoJGh0dHAsIG1kNSkge1xuICAgIHZhciBjbGllbnQgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gQ2xpZW50RXJyb3Ioc3RhdHVzQ29kZSwgbWVzc2FnZSkge1xuICAgICAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxKSByZXR1cm4gY2xpZW50LmxvZ291dCgpO1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENsaWVudCgpIHtcbiAgICAgICAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIgPSBbXTtcbiAgICAgICAgdGhpcy5fcmVhZHlMaXN0ZW5lciA9IFtdO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBudWxsLFxuICAgICAgICAgICAgZW1haWw6IG51bGwsXG4gICAgICAgICAgICBhZG1pbjogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fdG9rZW4gPSBudWxsO1xuICAgICAgICB0aGlzLl9jbGllbnRJZCA9ICdjaWQtd2ViYWRtaW4nO1xuICAgICAgICB0aGlzLl9jbGllbnRTZWNyZXQgPSAndW51c2VkJztcbiAgICAgICAgdGhpcy5fY29uZmlnID0ge1xuICAgICAgICAgICAgYXBpU2VydmVyT3JpZ2luOiBudWxsLFxuICAgICAgICAgICAgd2ViU2VydmVyT3JpZ2luOiBudWxsLFxuICAgICAgICAgICAgZnFkbjogbnVsbCxcbiAgICAgICAgICAgIGlwOiBudWxsLFxuICAgICAgICAgICAgcmV2aXNpb246IG51bGwsXG4gICAgICAgICAgICB1cGRhdGU6IHsgYm94OiBudWxsLCBhcHBzOiBudWxsIH0sXG4gICAgICAgICAgICBpc0RldjogZmFsc2UsXG4gICAgICAgICAgICBwcm9ncmVzczoge30sXG4gICAgICAgICAgICBpc0N1c3RvbURvbWFpbjogZmFsc2UsXG4gICAgICAgICAgICBkZXZlbG9wZXJNb2RlOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9pbnN0YWxsZWRBcHBzID0gW107XG5cbiAgICAgICAgdGhpcy5zZXRUb2tlbihsb2NhbFN0b3JhZ2UudG9rZW4pO1xuICAgIH1cblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0UmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWFkeSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuX3JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVhZHlMaXN0ZW5lci5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUub25SZWFkeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5fcmVhZHkpIGNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX3JlYWR5TGlzdGVuZXIucHVzaChjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUub25Db25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIucHVzaChjYWxsYmFjayk7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMuX2NvbmZpZyk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0VXNlckluZm8gPSBmdW5jdGlvbiAodXNlckluZm8pIHtcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8ga2VlcCB0aGUgYW5ndWxhciBiaW5kaW5ncyBhbGl2ZSwgc2V0IGVhY2ggcHJvcGVydHkgaW5kaXZpZHVhbGx5XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLnVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmVtYWlsID0gdXNlckluZm8uZW1haWw7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmFkbWluID0gISF1c2VySW5mby5hZG1pbjtcbiAgICAgICAgdGhpcy5fdXNlckluZm8uZ3JhdmF0YXIgPSAnaHR0cHM6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci8nICsgbWQ1LmNyZWF0ZUhhc2godXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSkgKyAnLmpwZz9zPTI0JmQ9bW0nO1xuICAgICAgICB0aGlzLl91c2VySW5mby5ncmF2YXRhckh1Z2UgPSAnaHR0cHM6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci8nICsgbWQ1LmNyZWF0ZUhhc2godXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSkgKyAnLmpwZz9zPTEyOCZkPW1tJztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGtlZXAgdGhlIGFuZ3VsYXIgYmluZGluZ3MgYWxpdmUsIHNldCBlYWNoIHByb3BlcnR5IGluZGl2aWR1YWxseSAoVE9ETzoganVzdCB1c2UgYW5ndWxhci5jb3B5ID8pXG4gICAgICAgIHRoaXMuX2NvbmZpZy5hcGlTZXJ2ZXJPcmlnaW4gPSBjb25maWcuYXBpU2VydmVyT3JpZ2luO1xuICAgICAgICB0aGlzLl9jb25maWcud2ViU2VydmVyT3JpZ2luID0gY29uZmlnLndlYlNlcnZlck9yaWdpbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLnZlcnNpb24gPSBjb25maWcudmVyc2lvbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLmZxZG4gPSBjb25maWcuZnFkbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLmlwID0gY29uZmlnLmlwO1xuICAgICAgICB0aGlzLl9jb25maWcucmV2aXNpb24gPSBjb25maWcucmV2aXNpb247XG4gICAgICAgIHRoaXMuX2NvbmZpZy51cGRhdGUgPSBjb25maWcudXBkYXRlO1xuICAgICAgICB0aGlzLl9jb25maWcuaXNEZXYgPSBjb25maWcuaXNEZXY7XG4gICAgICAgIHRoaXMuX2NvbmZpZy5wcm9ncmVzcyA9IGNvbmZpZy5wcm9ncmVzcztcbiAgICAgICAgdGhpcy5fY29uZmlnLnByb2dyZXNzID0gY29uZmlnLnByb2dyZXNzO1xuICAgICAgICB0aGlzLl9jb25maWcuaXNDdXN0b21Eb21haW4gPSBjb25maWcuaXNDdXN0b21Eb21haW47XG4gICAgICAgIHRoaXMuX2NvbmZpZy5kZXZlbG9wZXJNb2RlID0gY29uZmlnLmRldmVsb3Blck1vZGU7XG5cbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2NvbmZpZ0xpc3RlbmVyLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGF0Ll9jb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRJbnN0YWxsZWRBcHBzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5zdGFsbGVkQXBwcztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldENvbmZpZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgdG9rZW47XG4gICAgICAgIGlmICghdG9rZW4pIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpO1xuICAgICAgICBlbHNlIGxvY2FsU3RvcmFnZS50b2tlbiA9IHRva2VuO1xuICAgICAgICB0aGlzLl90b2tlbiA9IHRva2VuO1xuICAgIH07XG5cbiAgICAvKlxuICAgICAqIFJlc3QgQVBJIHdyYXBwZXJzXG4gICAgICovXG4gICAgQ2xpZW50LnByb3RvdHlwZS5jb25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL2NvbmZpZycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS51c2VySW5mbyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL3Byb2ZpbGUnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgLy8gY2FjaGUgdXNlciBpbmZvXG4gICAgICAgICAgICB0aGF0LnNldFVzZXJJbmZvKGRhdGEpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNoYW5nZURldmVsb3Blck1vZGUgPSBmdW5jdGlvbiAoZW5hYmxlZCwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICB2YXIgZGF0YSA9IHsgcGFzc3dvcmQ6IHBhc3N3b3JkLCBlbmFibGVkOiBlbmFibGVkIH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvZGV2ZWxvcGVyJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDApIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIHdpbGwgZ2V0IG92ZXJyaWRlbiBhZnRlciBwb2xsaW5nIGZvciBjb25maWcsIGJ1dCBlbnN1cmVzIHF1aWNrIFVJIHVwZGF0ZVxuICAgICAgICAgICAgdGhhdC5fY29uZmlnLmRldmVsb3Blck1vZGUgPSBlbmFibGVkO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmluc3RhbGxBcHAgPSBmdW5jdGlvbiAoaWQsIG1hbmlmZXN0LCBwYXNzd29yZCwgdGl0bGUsIGNvbmZpZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwU3RvcmVJZDogaWQsIG1hbmlmZXN0OiBtYW5pZmVzdCwgcGFzc3dvcmQ6IHBhc3N3b3JkLCBsb2NhdGlvbjogY29uZmlnLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IGNvbmZpZy5wb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiBjb25maWcuYWNjZXNzUmVzdHJpY3Rpb24gfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzL2luc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIHB1dCBuZXcgYXBwIHdpdGggYW1lbmRlZCB0aXRsZSBpbiBjYWNoZVxuICAgICAgICAgICAgZGF0YS5tYW5pZmVzdCA9IHsgdGl0bGU6IHRpdGxlIH07XG4gICAgICAgICAgICB0aGF0Ll9pbnN0YWxsZWRBcHBzLnB1c2goZGF0YSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudW5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKGFwcElkLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IHBhc3N3b3JkOiBwYXNzd29yZCB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGFwcElkICsgJy91bmluc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY29uZmlndXJlQXBwID0gZnVuY3Rpb24gKGlkLCBwYXNzd29yZCwgY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwSWQ6IGlkLCBwYXNzd29yZDogcGFzc3dvcmQsIGxvY2F0aW9uOiBjb25maWcubG9jYXRpb24sIHBvcnRCaW5kaW5nczogY29uZmlnLnBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246IGNvbmZpZy5hY2Nlc3NSZXN0cmljdGlvbiB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGlkICsgJy9jb25maWd1cmUnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXBkYXRlQXBwID0gZnVuY3Rpb24gKGlkLCBtYW5pZmVzdCwgcG9ydEJpbmRpbmdzLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvdXBkYXRlJywgeyBtYW5pZmVzdDogbWFuaWZlc3QsIHBhc3N3b3JkOiBwYXNzd29yZCwgcG9ydEJpbmRpbmdzOiBwb3J0QmluZGluZ3MgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gKGlkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvc3RhcnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc3RvcEFwcCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3N0b3AnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudmVyc2lvbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vc3RhdHVzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmlzU2VydmVyRmlyc3RUaW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9zdGF0dXMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICFkYXRhLmFjdGl2YXRlZCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXROYWtlZERvbWFpbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYXBwaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoYXBwaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJywgeyBhcHBpZDogYXBwaWQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2FwcHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFwcHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwID0gZnVuY3Rpb24gKGFwcElkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYXBwRm91bmQgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbnN0YWxsZWRBcHBzLnNvbWUoZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgaWYgKGFwcC5pZCA9PT0gYXBwSWQpIHtcbiAgICAgICAgICAgICAgICBhcHBGb3VuZCA9IGFwcDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYXBwRm91bmQpIHJldHVybiBjYWxsYmFjayhudWxsLCBhcHBGb3VuZCk7XG4gICAgICAgIGVsc2UgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignQXBwIG5vdCBmb3VuZCcpKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRBcHBMb2dTdHJlYW0gPSBmdW5jdGlvbiAoYXBwSWQpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9nc3RyZWFtJyk7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwTG9nVXJsID0gZnVuY3Rpb24gKGFwcElkKSB7XG4gICAgICAgIHJldHVybiAnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9ncz9hY2Nlc3NfdG9rZW49JyArIHRoaXMuX3Rva2VuO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldEFkbWluID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBhZG1pbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBhZG1pbjogYWRtaW5cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3VzZXJzLycgKyB1c2VybmFtZSArICcvYWRtaW4nLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlQWRtaW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgc2V0dXBUb2tlbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9hY3RpdmF0ZT9zZXR1cFRva2VuPScgKyBzZXR1cFRva2VuLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAxIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRUb2tlbihkYXRhLnRva2VuKTtcbiAgICAgICAgICAgIHRoYXQuc2V0VXNlckluZm8oeyB1c2VybmFtZTogdXNlcm5hbWUsIGVtYWlsOiBlbWFpbCwgYWRtaW46IHRydWUgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWN0aXZhdGVkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmxpc3RVc2VycyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvdXNlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0T0F1dGhDbGllbnRzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9vYXV0aC9jbGllbnRzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmNsaWVudHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZGVsVG9rZW5zQnlDbGllbnRJZCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvYXBpL3YxL29hdXRoL2NsaWVudHMvJyArIGlkICsgJy90b2tlbnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vdXBkYXRlJywgeyBwYXNzd29yZDogcGFzc3dvcmQgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlYm9vdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vcmVib290Jykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmJhY2t1cCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2Nsb3Vkcm9uL2JhY2t1cHMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0Q2VydGlmaWNhdGUgPSBmdW5jdGlvbiAoY2VydGlmaWNhdGVGaWxlLCBrZXlGaWxlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zb2xlLmxvZygnd2lsbCBzZXQgY2VydGlmaWNhdGUnKTtcblxuICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZmQuYXBwZW5kKCdjZXJ0aWZpY2F0ZScsIGNlcnRpZmljYXRlRmlsZSk7XG4gICAgICAgIGZkLmFwcGVuZCgna2V5Jywga2V5RmlsZSk7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9jZXJ0aWZpY2F0ZScsIGZkLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ3JhcGhzID0gZnVuY3Rpb24gKHRhcmdldHMsIGZyb20sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldHMsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgICAgICAgICAgZnJvbTogZnJvbVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9ncmFwaHMnLCBjb25maWcpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlVXNlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgZW1haWwsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2VycycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZW1vdmVVc2VyID0gZnVuY3Rpb24gKHVzZXJJZCwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAoeyBtZXRob2Q6ICdERUxFVEUnLCB1cmw6ICcvYXBpL3YxL3VzZXJzLycgKyB1c2VySWQsIGRhdGE6IGRhdGEsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9fSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBwYXNzd29yZDogY3VycmVudFBhc3N3b3JkLFxuICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld1Bhc3N3b3JkXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2Vycy8nICsgdGhpcy5fdXNlckluZm8udXNlcm5hbWUgKyAnL3Bhc3N3b3JkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY2hhbmdlRW1haWwgPSBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnB1dCgnL2FwaS92MS91c2Vycy8nICsgdGhpcy5fdXNlckluZm8udXNlcm5hbWUsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hDb25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIGNhbGxiYWNrID0gdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gY2FsbGJhY2sgOiBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgICB0aGlzLmNvbmZpZyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICB0aGF0LnNldENvbmZpZyhyZXN1bHQpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hJbnN0YWxsZWRBcHBzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBjYWxsYmFjayA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgdGhpcy5nZXRBcHBzKGZ1bmN0aW9uIChlcnJvciwgYXBwcykge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBpbnNlcnQgb3IgdXBkYXRlIG5ldyBhcHBzXG4gICAgICAgICAgICBhcHBzLmZvckVhY2goZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0Ll9pbnN0YWxsZWRBcHBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Ll9pbnN0YWxsZWRBcHBzW2ldLmlkID09PSBhcHAuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYXBwLCB0aGF0Ll9pbnN0YWxsZWRBcHBzW2ZvdW5kXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5faW5zdGFsbGVkQXBwcy5wdXNoKGFwcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgb2xkIGVudHJpZXMsIGdvaW5nIGJhY2t3YXJkcyB0byBhbGxvdyBzcGxpY2luZ1xuICAgICAgICAgICAgZm9yKHZhciBpID0gdGhhdC5faW5zdGFsbGVkQXBwcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIGlmICghYXBwcy5zb21lKGZ1bmN0aW9uIChlbGVtKSB7IHJldHVybiAoZWxlbS5pZCA9PT0gdGhhdC5faW5zdGFsbGVkQXBwc1tpXS5pZCk7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX2luc3RhbGxlZEFwcHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRva2VuKG51bGwpO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHt9O1xuXG4gICAgICAgIC8vIGxvZ291dCBmcm9tIE9BdXRoIHNlc3Npb25cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9zZXNzaW9uL2xvZ291dCc7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZXhjaGFuZ2VDb2RlRm9yVG9rZW4gPSBmdW5jdGlvbiAoYXV0aENvZGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ2F1dGhvcml6YXRpb25fY29kZScsXG4gICAgICAgICAgICBjb2RlOiBhdXRoQ29kZSxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VyaTogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIGNsaWVudF9pZDogdGhpcy5fY2xpZW50SWQsXG4gICAgICAgICAgICBjbGllbnRfc2VjcmV0OiB0aGlzLl9jbGllbnRTZWNyZXRcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL29hdXRoL3Rva2VuP3Jlc3BvbnNlX3R5cGU9dG9rZW4mY2xpZW50X2lkPScgKyB0aGlzLl9jbGllbnRJZCwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBjbGllbnQgPSBuZXcgQ2xpZW50KCk7XG4gICAgcmV0dXJuIGNsaWVudDtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwU3RvcmVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyR0aW1lb3V0JywgJ0NsaWVudCcsICdBcHBTdG9yZScsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHRpbWVvdXQsIENsaWVudCwgQXBwU3RvcmUpIHtcbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7IGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7IH0pO1xuXG4gICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG4gICAgJHNjb3BlLmFwcHMgPSBbXTtcbiAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuXG4gICAgJHNjb3BlLmFwcGluc3RhbGwgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGFwcDoge30sXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBwb3J0QmluZGluZ3M6IHt9LFxuICAgICAgICBhY2Nlc3NSZXN0cmljdGlvbjogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmFwcCA9IHt9O1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5sb2NhdGlvbiA9ICcnO1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wb3J0QmluZGluZ3MgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYWNjZXNzUmVzdHJpY3Rpb24gPSAnJztcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IgPSB7fTtcblxuICAgICAgICAkc2NvcGUuaW5zdGFsbF9mb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAkc2NvcGUuaW5zdGFsbF9mb3JtLiRzZXRVbnRvdWNoZWQoKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dJbnN0YWxsID0gZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAkc2NvcGUucmVzZXQoKTtcblxuICAgICAgICBBcHBTdG9yZS5nZXRNYW5pZmVzdChhcHAuaWQsIGZ1bmN0aW9uIChlcnJvciwgbWFuaWZlc3QpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBhZGQgbWFuaWZlc3QgdG8gYXBwIG9iamVjdFxuICAgICAgICAgICAgYXBwLm1hbmlmZXN0ID0gbWFuaWZlc3Q7XG5cbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmFwcCA9IGFwcDtcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmxvY2F0aW9uID0gYXBwLmxvY2F0aW9uO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwucG9ydEJpbmRpbmdzID0gbWFuaWZlc3QudGNwUG9ydHM7XG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5hY2Nlc3NSZXN0cmljdGlvbiA9IGFwcC5hY2Nlc3NSZXN0cmljdGlvbiB8fCAnJztcblxuICAgICAgICAgICAgJCgnI2FwcEluc3RhbGxNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9JbnN0YWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5idXN5ID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IubmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IucG9ydCA9IG51bGw7XG5cbiAgICAgICAgdmFyIHBvcnRCaW5kaW5ncyA9IHsgfTtcbiAgICAgICAgZm9yICh2YXIgZW52IGluICRzY29wZS5hcHBpbnN0YWxsLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgcG9ydEJpbmRpbmdzW2Vudl0gPSAkc2NvcGUuYXBwaW5zdGFsbC5wb3J0QmluZGluZ3NbZW52XS5ob3N0UG9ydDtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5pbnN0YWxsQXBwKCRzY29wZS5hcHBpbnN0YWxsLmFwcC5pZCwgJHNjb3BlLmFwcGluc3RhbGwuYXBwLm1hbmlmZXN0LCAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCwgJHNjb3BlLmFwcGluc3RhbGwuYXBwLnRpdGxlLCB7IGxvY2F0aW9uOiAkc2NvcGUuYXBwaW5zdGFsbC5sb2NhdGlvbiwgcG9ydEJpbmRpbmdzOiBwb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiAkc2NvcGUuYXBwaW5zdGFsbC5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDkgJiYgZXJyb3IubWVzc2FnZS5pbmRleE9mKCdpcyByZXNlcnZlZCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5wb3J0ID0gJ1RoaXMgcG9ydCBpcyBhbHJlYWR5IGluIHVzZS4nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDA5KSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLm5hbWUgPSAnQXBwbGljYXRpb24gYWxyZWFkeSBleGlzdHMuJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLm5hbWUgPSAnQXBwIHdpdGggdGhlIG5hbWUgJyArICRzY29wZS5hcHBpbnN0YWxsLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgaW5zdGFsbGVkLic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYnVzeSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAkKCcjYXBwSW5zdGFsbE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAgICAgJHNjb3BlLnJlc2V0KCk7XG5cbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYXBwcycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG5cbiAgICAgICAgQXBwU3RvcmUuZ2V0QXBwcyhmdW5jdGlvbiAoZXJyb3IsIGFwcHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiAkdGltZW91dChyZWZyZXNoLCAxMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcHMgPSBhcHBzO1xuICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpO1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ2FwcEluc3RhbGxNb2RhbCddLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICQoJyMnICsgaWQpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZChcIlthdXRvZm9jdXNdOmZpcnN0XCIpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRyb3V0ZScsICckaW50ZXJ2YWwnLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlLCAkaW50ZXJ2YWwsIENsaWVudCkge1xuICAgICRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICRzY29wZS51c2VySW5mbyA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSB7fTtcblxuICAgICRzY29wZS51cGRhdGUgPSB7XG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgaWYgKCEkcm91dGUuY3VycmVudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS5vcmlnaW5hbFBhdGguaW5kZXhPZih1cmwpID09PSAwO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgQ2xpZW50LmxvZ291dCgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYWxsYmFja1VSTCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL2xvZ2luX2NhbGxiYWNrLmh0bWwnO1xuICAgICAgICB2YXIgc2NvcGUgPSAncm9vdCxwcm9maWxlLGFwcHMscm9sZUFkbWluJztcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9vYXV0aC9kaWFsb2cvYXV0aG9yaXplP3Jlc3BvbnNlX3R5cGU9Y29kZSZjbGllbnRfaWQ9JyArIENsaWVudC5fY2xpZW50SWQgKyAnJnJlZGlyZWN0X3VyaT0nICsgY2FsbGJhY2tVUkwgKyAnJnNjb3BlPScgKyBzY29wZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZXJyb3IuaHRtbD9lcnJvckNvZGU9MSc7XG4gICAgfTtcblxuICAgICRzY29wZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2Vycm9yLmh0bWwnO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd1VwZGF0ZU1vZGFsID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgJHNjb3BlLnVwZGF0ZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS51cGRhdGUucGFzc3dvcmQgPSAnJztcblxuICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblxuICAgICAgICAkKCcjdXBkYXRlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS51cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC51cGRhdGUoJHNjb3BlLnVwZGF0ZS5wYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGUuZXJyb3IucGFzc3dvcmQgPSAnSW5jb3JyZWN0IHBhc3N3b3JkJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byB1cGRhdGUuJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy91cGRhdGUuaHRtbCc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuYmFja3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjYmFja3VwUHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG5cbiAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LmJhY2t1cChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIC8vIFRPRE8gdGhpcyBkb2VzIGxvb2sgbGlrZSB3ZSBzaG91bGQgdXNlIHByb2dyZXNzLmpzb24/XG4gICAgICAgICAgICAvLyBub3cgc3RhcnQgcXVlcnlcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrSWZEb25lKCkge1xuICAgICAgICAgICAgICAgIENsaWVudC52ZXJzaW9uKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgNTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQuaXNTZXJ2ZXJGaXJzdFRpbWUoZnVuY3Rpb24gKGVycm9yLCBpc0ZpcnN0VGltZSkge1xuICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICBpZiAoaXNGaXJzdFRpbWUpIHJldHVybiAkc2NvcGUuc2V0dXAoKTtcblxuICAgICAgICAvLyB3ZSB1c2UgdGhlIGNvbmZpZyByZXF1ZXN0IGFzIGFuIGluZGljYXRvciBpZiB0aGUgdG9rZW4gaXMgc3RpbGwgdmFsaWRcbiAgICAgICAgLy8gVE9ETyB3ZSBzaG91bGQgcHJvYmFibHkgYXR0YWNoIHN1Y2ggYSBoYW5kbGVyIGZvciBlYWNoIHJlcXVlc3QsIGFzIHRoZSB0b2tlbiBjYW4gZ2V0IGludmFsaWRcbiAgICAgICAgLy8gYXQgYW55IHRpbWUhXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UudG9rZW4pIHtcbiAgICAgICAgICAgIENsaWVudC5yZWZyZXNoQ29uZmlnKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDEpIHJldHVybiAkc2NvcGUubG9naW4oKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGFjdHVhbGx5IHVwZGF0ZWluZ1xuICAgICAgICAgICAgICAgIGlmIChDbGllbnQuZ2V0Q29uZmlnKCkucHJvZ3Jlc3MudXBkYXRlKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuXG4gICAgICAgICAgICAgICAgQ2xpZW50LnVzZXJJbmZvKGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuICRzY29wZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50LnJlZnJlc2hJbnN0YWxsZWRBcHBzKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2ljayBvZmYgaW5zdGFsbGVkIGFwcHMgYW5kIGNvbmZpZyBwb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcmVzaEFwcHNUaW1lciA9ICRpbnRlcnZhbChDbGllbnQucmVmcmVzaEluc3RhbGxlZEFwcHMuYmluZChDbGllbnQpLCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWZyZXNoQ29uZmlnVGltZXIgPSAkaW50ZXJ2YWwoQ2xpZW50LnJlZnJlc2hDb25maWcuYmluZChDbGllbnQpLCA1MDAwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChyZWZyZXNoQXBwc1RpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHJlZnJlc2hDb25maWdUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93IG1hcmsgdGhlIENsaWVudCB0byBiZSByZWFkeVxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xpZW50LnNldFJlYWR5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUubG9naW4oKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gd2FpdCB0aWxsIHRoZSB2aWV3IGhhcyBsb2FkZWQgdW50aWwgc2hvd2luZyBhIG1vZGFsIGRpYWxvZ1xuICAgIENsaWVudC5vbkNvbmZpZyhmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIGlmIChjb25maWcucHJvZ3Jlc3MudXBkYXRlKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBzZXR1cCBhbGwgdGhlIGRpYWxvZyBmb2N1cyBoYW5kbGluZ1xuICAgIFsndXBkYXRlTW9kYWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAkKCcjJyArIGlkKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCJbYXV0b2ZvY3VzXTpmaXJzdFwiKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQWNjb3VudENvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICAkc2NvcGUudXNlciA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG5cbiAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IFtdO1xuICAgICRzY29wZS50b2tlbkluVXNlID0gbnVsbDtcblxuICAgICRzY29wZS5wYXNzd29yZGNoYW5nZSA9IHtcbiAgICAgICAgYnVzeTogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBuZXdQYXNzd29yZDogJycsXG4gICAgICAgIG5ld1Bhc3N3b3JkUmVwZWF0OiAnJ1xuICAgIH07XG5cbiAgICAkc2NvcGUuZW1haWxjaGFuZ2UgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcGFzc3dvcmRDaGFuZ2VSZXNldCAoZm9ybSkge1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IubmV3UGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IubmV3UGFzc3dvcmRSZXBlYXQgPSBudWxsO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UucGFzc3dvcmQgPSAnJztcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLm5ld1Bhc3N3b3JkID0gJyc7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5uZXdQYXNzd29yZFJlcGVhdCA9ICcnO1xuXG4gICAgICAgIGlmIChmb3JtKSB7XG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbWFpbENoYW5nZVJlc2V0IChmb3JtKSB7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5lcnJvci5lbWFpbCA9IG51bGw7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5lbWFpbCA9ICcnO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UucGFzc3dvcmQgPSAnJztcblxuICAgICAgICBpZiAoZm9ybSkge1xuICAgICAgICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGV2ZWxvcGVyTW9kZUNoYW5nZVJlc2V0ICgpIHtcbiAgICAgICAgJHNjb3BlLmRldmVsb3Blck1vZGVDaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZGV2ZWxvcGVyTW9kZUNoYW5nZS5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgJHNjb3BlLmRldmVsb3Blck1vZGVDaGFuZ2VGb3JtLiRzZXRVbnRvdWNoZWQoKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZG9DaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZFJlcGVhdCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5idXN5ID0gdHJ1ZTtcblxuICAgICAgICBDbGllbnQuY2hhbmdlUGFzc3dvcmQoJHNjb3BlLnBhc3N3b3JkY2hhbmdlLnBhc3N3b3JkLCAkc2NvcGUucGFzc3dvcmRjaGFuZ2UubmV3UGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY2hhbmdlIHBhc3N3b3JkLicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgcGFzc3dvcmRDaGFuZ2VSZXNldChmb3JtKTtcblxuICAgICAgICAgICAgJCgnI3Bhc3N3b3JkQ2hhbmdlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvQ2hhbmdlRW1haWwgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZXJyb3IuZW1haWwgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuYnVzeSA9IHRydWU7XG5cbiAgICAgICAgQ2xpZW50LmNoYW5nZUVtYWlsKCRzY29wZS5lbWFpbGNoYW5nZS5lbWFpbCwgJHNjb3BlLmVtYWlsY2hhbmdlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLmVycm9yLnBhc3N3b3JkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNoYW5nZSBlbWFpbC4nLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgIGVtYWlsQ2hhbmdlUmVzZXQoZm9ybSk7XG5cbiAgICAgICAgICAgIC8vIGZldGNoIG5ldyBpbmZvIGluIHRoZSBiYWNrZ3JvdW5kXG4gICAgICAgICAgICBDbGllbnQudXNlckluZm8oZnVuY3Rpb24gKCkge30pO1xuXG4gICAgICAgICAgICAkKCcjZW1haWxDaGFuZ2VNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9DaGFuZ2VEZXZlbG9wZXJNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZGV2ZWxvcGVyTW9kZUNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlLmJ1c3kgPSB0cnVlO1xuXG4gICAgICAgIENsaWVudC5jaGFuZ2VEZXZlbG9wZXJNb2RlKCEkc2NvcGUuY29uZmlnLmRldmVsb3Blck1vZGUsICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRldmVsb3Blck1vZGVDaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGV2ZWxvcGVyTW9kZUNoYW5nZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjaGFuZ2UgcGFzc3dvcmQuJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgIGRldmVsb3Blck1vZGVDaGFuZ2VSZXNldCgpO1xuXG4gICAgICAgICAgICAkKCcjZGV2ZWxvcGVyTW9kZUNoYW5nZU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaG93Q2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICBwYXNzd29yZENoYW5nZVJlc2V0KGZvcm0pO1xuXG4gICAgICAgICQoJyNwYXNzd29yZENoYW5nZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dDaGFuZ2VFbWFpbCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgIGVtYWlsQ2hhbmdlUmVzZXQoZm9ybSk7XG5cbiAgICAgICAgJCgnI2VtYWlsQ2hhbmdlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd0NoYW5nZURldmVsb3Blck1vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRldmVsb3Blck1vZGVDaGFuZ2VSZXNldCgpO1xuXG4gICAgICAgICQoJyNkZXZlbG9wZXJNb2RlQ2hhbmdlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUucmVtb3ZlQWNjZXNzVG9rZW5zID0gZnVuY3Rpb24gKGNsaWVudCwgZXZlbnQpIHtcbiAgICAgICAgQ2xpZW50LmRlbFRva2Vuc0J5Q2xpZW50SWQoY2xpZW50LmlkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgJChldmVudC50YXJnZXQpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldE9BdXRoQ2xpZW50cyhmdW5jdGlvbiAoZXJyb3IsIGFjdGl2ZUNsaWVudHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IGFjdGl2ZUNsaWVudHM7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ3Bhc3N3b3JkQ2hhbmdlTW9kYWwnLCAnZW1haWxDaGFuZ2VNb2RhbCcsICdkZXZlbG9wZXJNb2RlQ2hhbmdlTW9kYWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAkKCcjJyArIGlkKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCJbYXV0b2ZvY3VzXTpmaXJzdFwiKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgJ0FwcFN0b3JlJywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQsIEFwcFN0b3JlKSB7XG4gICAgJHNjb3BlLmluc3RhbGxlZEFwcHMgPSBDbGllbnQuZ2V0SW5zdGFsbGVkQXBwcygpO1xuICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG5cbiAgICAkc2NvcGUuYXBwY29uZmlndXJlID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBsb2NhdGlvbjogJycsXG4gICAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgICAgcG9ydEJpbmRpbmdzOiB7fSxcbiAgICAgICAgYWNjZXNzUmVzdHJpY3Rpb246ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5hcHB1bmluc3RhbGwgPSB7XG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgYXBwOiB7fSxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5hcHB1cGRhdGUgPSB7XG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgYXBwOiB7fSxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBtYW5pZmVzdDoge30sXG4gICAgICAgIHBvcnRCaW5kaW5nczoge31cbiAgICB9O1xuXG4gICAgJHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yID0ge307XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYXBwID0ge307XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUubG9jYXRpb24gPSAnJztcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBvcnRCaW5kaW5ncyA9IHt9O1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmFjY2Vzc1Jlc3RyaWN0aW9uID0gJyc7XG5cbiAgICAgICAgJHNjb3BlLmNvbmZpZ19mb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAkc2NvcGUuY29uZmlnX2Zvcm0uJHNldFVudG91Y2hlZCgpO1xuXG4gICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwuYXBwID0ge307XG4gICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwuZXJyb3IgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLm1hbmlmZXN0ID0ge307XG4gICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwucG9ydEJpbmRpbmdzID0ge307XG5cbiAgICAgICAgJHNjb3BlLnVuaW5zdGFsbF9mb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAkc2NvcGUudW5pbnN0YWxsX2Zvcm0uJHNldFVudG91Y2hlZCgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd0NvbmZpZ3VyZSA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgJHNjb3BlLnJlc2V0KCk7XG5cbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5hcHAgPSBhcHA7XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUubG9jYXRpb24gPSBhcHAubG9jYXRpb247XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzID0gYXBwLm1hbmlmZXN0LnRjcFBvcnRzO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmFjY2Vzc1Jlc3RyaWN0aW9uID0gYXBwLmFjY2Vzc1Jlc3RyaWN0aW9uO1xuXG4gICAgICAgICQoJyNhcHBDb25maWd1cmVNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb0NvbmZpZ3VyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5idXN5ID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5uYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG5cbiAgICAgICAgdmFyIHBvcnRCaW5kaW5ncyA9IHsgfTtcbiAgICAgICAgZm9yICh2YXIgZW52IGluICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICBwb3J0QmluZGluZ3NbZW52XSA9ICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzW2Vudl0uaG9zdFBvcnQ7XG4gICAgICAgIH1cblxuICAgICAgICBDbGllbnQuY29uZmlndXJlQXBwKCRzY29wZS5hcHBjb25maWd1cmUuYXBwLmlkLCAkc2NvcGUuYXBwY29uZmlndXJlLnBhc3N3b3JkLCB7IGxvY2F0aW9uOiAkc2NvcGUuYXBwY29uZmlndXJlLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IHBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246ICRzY29wZS5hcHBjb25maWd1cmUuYWNjZXNzUmVzdHJpY3Rpb24gfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuZXJyb3IucGFzc3dvcmQgPSAnV3JvbmcgcGFzc3dvcmQgcHJvdmlkZWQuJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuZXJyb3IubmFtZSA9ICdBcHAgd2l0aCB0aGUgbmFtZSAnICsgJHNjb3BlLmFwcGNvbmZpZ3VyZS5hcHAubmFtZSArICcgY2Fubm90IGJlIGNvbmZpZ3VyZWQuJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYnVzeSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAkKCcjYXBwQ29uZmlndXJlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICAgICAkc2NvcGUucmVzZXQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaG93VW5pbnN0YWxsID0gZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAkc2NvcGUucmVzZXQoKTtcblxuICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLmFwcCA9IGFwcDtcblxuICAgICAgICAkKCcjYXBwVW5pbnN0YWxsTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9Vbmluc3RhbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC51bmluc3RhbGxBcHAoJHNjb3BlLmFwcHVuaW5zdGFsbC5hcHAuaWQsICRzY29wZS5hcHB1bmluc3RhbGwucGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwuZXJyb3IucGFzc3dvcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoJyNhcHBVbmluc3RhbGxNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgICAgICRzY29wZS5yZXNldCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dVcGRhdGUgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICRzY29wZS5hcHB1cGRhdGUuYXBwID0gYXBwO1xuICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICBBcHBTdG9yZS5nZXRNYW5pZmVzdChhcHAuYXBwU3RvcmVJZCwgZnVuY3Rpb24gKGVycm9yLCBtYW5pZmVzdCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIC8vIEFjdGl2YXRlIGJlbG93IHR3byBsaW5lcyBmb3IgdGVzdGluZyB0aGUgVUlcbiAgICAgICAgICAgIC8vIG1hbmlmZXN0LnRjcFBvcnRzWydURVNUX0hUVFAnXSA9IHsgcG9ydDogMTMzNywgZGVzY3JpcHRpb246ICdIVFRQIHNlcnZlcid9O1xuICAgICAgICAgICAgLy8gYXBwLnBvcnRCaW5kaW5nc1snVEVTVF9TU0gnXSA9IHsgcG9ydDogMTMzNywgZGVzY3JpcHRpb246ICdTU0ggc2VydmVyJ307XG5cbiAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUubWFuaWZlc3QgPSBtYW5pZmVzdDtcbiAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUucG9ydEJpbmRpbmdzID0gYW5ndWxhci5jb3B5KGFwcC5wb3J0QmluZGluZ3MpO1xuXG4gICAgICAgICAgICAvLyBkZXRlY3QgbmV3IHBvcnRiaW5kaW5nc1xuICAgICAgICAgICAgZm9yICh2YXIgZW52IGluICRzY29wZS5hcHB1cGRhdGUubWFuaWZlc3QudGNwUG9ydHMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLnBvcnRCaW5kaW5nc1tlbnZdID0gJHNjb3BlLmFwcHVwZGF0ZS5tYW5pZmVzdC50Y3BQb3J0c1tlbnZdO1xuICAgICAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUucG9ydEJpbmRpbmdzW2Vudl0uaXNOZXcgPSAhJHNjb3BlLmFwcHVwZGF0ZS5hcHAucG9ydEJpbmRpbmdzW2Vudl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRldGVjdCBvYnNvbGV0ZSBwb3J0YmluZGluZ3NcbiAgICAgICAgICAgIGZvciAoZW52IGluICRzY29wZS5hcHB1cGRhdGUuYXBwLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXBwdXBkYXRlLm1hbmlmZXN0LnRjcFBvcnRzW2Vudl0pIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUucG9ydEJpbmRpbmdzW2Vudl0uaXNPYnNvbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoJyNhcHBVcGRhdGVNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9VcGRhdGUgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICBDbGllbnQudXBkYXRlQXBwKCRzY29wZS5hcHB1cGRhdGUuYXBwLmlkLCAkc2NvcGUuYXBwdXBkYXRlLm1hbmlmZXN0LCAkc2NvcGUuYXBwdXBkYXRlLnBvcnRCaW5kaW5ncywgJHNjb3BlLmFwcHVwZGF0ZS5wYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5lcnJvci5wYXNzd29yZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5hcHAgPSB7fTtcbiAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUucGFzc3dvcmQgPSAnJztcblxuICAgICAgICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXG4gICAgICAgICAgICAkKCcjYXBwVXBkYXRlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgIH07XG5cbiAgICAvLyBzZXR1cCBhbGwgdGhlIGRpYWxvZyBmb2N1cyBoYW5kbGluZ1xuICAgIFsnYXBwQ29uZmlndXJlTW9kYWwnLCAnYXBwVW5pbnN0YWxsTW9kYWwnLCAnYXBwVXBkYXRlTW9kYWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAkKCcjJyArIGlkKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCJbYXV0b2ZvY3VzXTpmaXJzdFwiKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignRG5zQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIENsaWVudC5vblJlYWR5KGZ1bmN0aW9uICgpIHsgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTsgfSk7XG5cbiAgICAkc2NvcGUucmVhZHkgPSBmYWxzZTtcbiAgICAkc2NvcGUudXNlciA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG4gICAgJHNjb3BlLm5ha2VkRG9tYWluQXBwID0gbnVsbDtcbiAgICAkc2NvcGUuY2VydGlmaWNhdGVGaWxlID0gbnVsbDtcbiAgICAkc2NvcGUuY2VydGlmaWNhdGVGaWxlTmFtZSA9ICcnO1xuICAgICRzY29wZS5rZXlGaWxlID0gbnVsbDtcbiAgICAkc2NvcGUua2V5RmlsZU5hbWUgPSAnJztcblxuICAgICRzY29wZS5zZXROYWtlZERvbWFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFwcGlkID0gJHNjb3BlLm5ha2VkRG9tYWluQXBwID8gJHNjb3BlLm5ha2VkRG9tYWluQXBwLmlkIDogJ2FkbWluJztcblxuICAgICAgICBDbGllbnQuc2V0TmFrZWREb21haW4oYXBwaWQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyBuYWtlZCBkb21haW4nLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuYmFja3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjYmFja3VwUHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgICRzY29wZS4kcGFyZW50LmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LmJhY2t1cChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIC8vIG5vdyBzdGFydCBxdWVyeVxuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tJZkRvbmUoKSB7XG4gICAgICAgICAgICAgICAgQ2xpZW50LnZlcnNpb24oZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrSWZEb25lLCAxMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCcjYmFja3VwUHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDUwMDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI3VwZGF0ZU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAkc2NvcGUuJHBhcmVudC5pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC51cGRhdGUoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkQ2VydGlmaWNhdGUnKS5vbmNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XG4gICAgICAgICAgICAkc2NvcGUuY2VydGlmaWNhdGVGaWxlTmFtZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXS5uYW1lO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkS2V5Jykub25jaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUua2V5RmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICAgICAgICAgICRzY29wZS5rZXlGaWxlTmFtZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXS5uYW1lO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldENlcnRpZmljYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnV2lsbCBzZXQgdGhlIGNlcnRpZmljYXRlJyk7XG5cbiAgICAgICAgaWYgKCEkc2NvcGUuY2VydGlmaWNhdGVGaWxlKSByZXR1cm4gY29uc29sZS5sb2coJ0NlcnRpZmljYXRlIG5vdCBzZXQnKTtcbiAgICAgICAgaWYgKCEkc2NvcGUua2V5RmlsZSkgcmV0dXJuIGNvbnNvbGUubG9nKCdLZXkgbm90IHNldCcpO1xuXG4gICAgICAgIENsaWVudC5zZXRDZXJ0aWZpY2F0ZSgkc2NvcGUuY2VydGlmaWNhdGVGaWxlLCAkc2NvcGUua2V5RmlsZSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQuYmluZCh3aW5kb3cubG9jYXRpb24sIHRydWUpLCAzMDAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5vbkNvbmZpZyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS50b2tlbkluVXNlID0gQ2xpZW50Ll90b2tlbjtcblxuICAgICAgICBDbGllbnQuZ2V0QXBwcyhmdW5jdGlvbiAoZXJyb3IsIGFwcHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBhcHAgbGlzdCcpO1xuICAgICAgICAgICAgJHNjb3BlLmFwcHMgPSBhcHBzO1xuXG4gICAgICAgICAgICBDbGllbnQuZ2V0TmFrZWREb21haW4oZnVuY3Rpb24gKGVycm9yLCBhcHBpZCkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ha2VkRG9tYWluQXBwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5hcHBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXBwc1tpXS5pZCA9PT0gYXBwaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5uYWtlZERvbWFpbkFwcCA9ICRzY29wZS5hcHBzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUucmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiLyogZ2xvYmFsOlJpY2tzaGF3OnRydWUgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdHcmFwaHNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblxuICAgICRzY29wZS5hY3RpdmVUYWIgPSAnZGF5JztcblxuICAgIHZhciBjcHVVc2FnZVRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKCcgK1xuICAgICdzY2FsZShkaXZpZGVTZXJpZXMoJyArXG4gICAgICAgICdzdW1TZXJpZXMoY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1zeXN0ZW0sY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1uaWNlLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtdXNlciksJyArXG4gICAgICAgICdzdW1TZXJpZXMoY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1pZGxlLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtc3lzdGVtLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtbmljZSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXVzZXIsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS13YWl0KSksIDEwMCksIDApJztcblxuICAgIHZhciBuZXR3b3JrVXNhZ2VUeFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5pbnRlcmZhY2UtZXRoMC5pZl9vY3RldHMudHgsIDApJztcbiAgICB2YXIgbmV0d29ya1VzYWdlUnhUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuaW50ZXJmYWNlLWV0aDAuaWZfb2N0ZXRzLnJ4LCAwKSc7XG5cbiAgICB2YXIgZGlza1VzYWdlQXBwc1VzZWRUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuZGYtbG9vcDAuZGZfY29tcGxleC11c2VkLCAwKSc7XG4gICAgdmFyIGRpc2tVc2FnZURhdGFVc2VkVGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmRmLWxvb3AxLmRmX2NvbXBsZXgtdXNlZCwgMCknO1xuXG4gICAgZnVuY3Rpb24gcmVuZGVyQ3B1KGFjdGl2ZVRhYiwgY3B1RGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRDcHUgPSBbIF07XG5cbiAgICAgICAgaWYgKGNwdURhdGEgJiYgY3B1RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZENwdSA9IGNwdURhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuXG4gICAgICAgIHZhciBjcHVHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdDcHVDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZENwdSxcbiAgICAgICAgICAgICAgICBuYW1lOiAnY3B1J1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNwdVhBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBjcHVHcmFwaCB9KTtcbiAgICAgICAgdmFyIGNwdVlBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogY3B1R3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnQ3B1WUF4aXMnKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNwdUhvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBjcHVHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeSkudG9GaXhlZCgyKSArICclPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNwdUdyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlck5ldHdvcmsoYWN0aXZlVGFiLCB0eERhdGEsIHJ4RGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRUeCA9IFsgXSwgdHJhbnNmb3JtZWRSeCA9IFsgXTtcblxuICAgICAgICBpZiAodHhEYXRhICYmIHR4RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZFR4ID0gdHhEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcbiAgICAgICAgaWYgKHJ4RGF0YSAmJiByeERhdGEuZGF0YXBvaW50cykgdHJhbnNmb3JtZWRSeCA9IHJ4RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIG5ldHdvcmtHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdOZXR3b3JrQ2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBzZXJpZXM6IFsge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZFR4LFxuICAgICAgICAgICAgICAgIG5hbWU6ICd0eCdcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZFJ4LFxuICAgICAgICAgICAgICAgIG5hbWU6ICdyeCdcbiAgICAgICAgICAgIH0gXVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdmFyIG5ldHdvcmtYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogbmV0d29ya0dyYXBoIH0pO1xuICAgICAgICB2YXIgbmV0d29ya1lBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogbmV0d29ya0dyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ05ldHdvcmtZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbmV0d29ya0hvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBuZXR3b3JrR3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkvMTAyNCkudG9GaXhlZCgyKSArICdLQjxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBuZXR3b3JrR3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyRGlzayhhY3RpdmVUYWIsIGFwcHNVc2VkRGF0YSwgZGF0YVVzZWREYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZEFwcHNVc2VkID0gWyBdLCB0cmFuc2Zvcm1lZERhdGFVc2VkID0gWyBdO1xuXG4gICAgICAgIGlmIChhcHBzVXNlZERhdGEgJiYgYXBwc1VzZWREYXRhLmRhdGFwb2ludHMpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQXBwc1VzZWQgPSBhcHBzVXNlZERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9OyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhVXNlZERhdGEgJiYgZGF0YVVzZWREYXRhLmRhdGFwb2ludHMpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkRGF0YVVzZWQgPSBkYXRhVXNlZERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9OyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkaXNrR3JhcGggPSBuZXcgUmlja3NoYXcuR3JhcGgoe1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBhY3RpdmVUYWIgKyAnRGlza0NoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAzMCAqIDEwMjQgKiAxMDI0ICogMTAyNCwgLy8gMzBnYlxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZEFwcHNVc2VkLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdhcHBzJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZ3JlZW4nLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkRGF0YVVzZWQsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2RhdGEnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdmFyIGRpc2tYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogZGlza0dyYXBoIH0pO1xuICAgICAgICB2YXIgZGlza1lBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0Rpc2tZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0hvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkvKDEwMjQgKiAxMDI0ICogMTAyNCkpLnRvRml4ZWQoMikgKyAnR0I8YnI+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRpc2tMZWdlbmQgPSBuZXcgUmlja3NoYXcuR3JhcGguTGVnZW5kKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnRGlza0xlZ2VuZCcpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpc2tHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICAkc2NvcGUudXBkYXRlR3JhcGhzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYWN0aXZlVGFiID0gJHNjb3BlLmFjdGl2ZVRhYjtcbiAgICAgICB2YXIgZnJvbSA9ICctMjRob3Vycyc7XG4gICAgICAgIHN3aXRjaCAoYWN0aXZlVGFiKSB7XG4gICAgICAgIGNhc2UgJ2RheSc6IGZyb20gPSAnLTI0aG91cnMnOyBicmVhaztcbiAgICAgICAgY2FzZSAnbW9udGgnOiBmcm9tID0gJy0xbW9udGgnOyBicmVhaztcbiAgICAgICAgY2FzZSAneWVhcic6IGZyb20gPSAnLTF5ZWFyJzsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKCdpbnRlcm5hbCBlcnJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5ncmFwaHMoWyBjcHVVc2FnZVRhcmdldCwgbmV0d29ya1VzYWdlVHhUYXJnZXQsIG5ldHdvcmtVc2FnZVJ4VGFyZ2V0LCBkaXNrVXNhZ2VBcHBzVXNlZFRhcmdldCwgZGlza1VzYWdlRGF0YVVzZWRUYXJnZXQgXSwgZnJvbSwgZnVuY3Rpb24gKGVycm9yLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgIHJlbmRlckNwdShhY3RpdmVUYWIsIGRhdGFbMF0pO1xuXG4gICAgICAgICAgICByZW5kZXJOZXR3b3JrKGFjdGl2ZVRhYiwgZGF0YVsxXSwgZGF0YVsyXSk7XG5cbiAgICAgICAgICAgIHJlbmRlckRpc2soYWN0aXZlVGFiLCBkYXRhWzNdLCBkYXRhWzRdKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5vblJlYWR5KCRzY29wZS51cGRhdGVHcmFwaHMpO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdVc2Vyc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7IGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7IH0pO1xuXG4gICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG4gICAgJHNjb3BlLnVzZXJzID0gW107XG4gICAgJHNjb3BlLnVzZXJJbmZvID0gQ2xpZW50LmdldFVzZXJJbmZvKCk7XG5cbiAgICAkc2NvcGUudXNlcnJlbW92ZSA9IHtcbiAgICAgICAgYnVzeTogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgdXNlckluZm86IHt9LFxuICAgICAgICB1c2VybmFtZTogJycsXG4gICAgICAgIHBhc3N3b3JkOiAnJ1xuICAgIH07XG5cbiAgICAkc2NvcGUudXNlcmFkZCA9IHtcbiAgICAgICAgYnVzeTogZmFsc2UsXG4gICAgICAgIGFscmVhZHlUYWtlbjogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgdXNlcm5hbWU6ICcnLFxuICAgICAgICBlbWFpbDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzTWUgPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gdXNlci51c2VybmFtZSA9PT0gQ2xpZW50LmdldFVzZXJJbmZvKCkudXNlcm5hbWU7XG4gICAgfTtcblxuICAgICRzY29wZS5pc0FkbWluID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuICEhdXNlci5hZG1pbjtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnRvZ2dsZUFkbWluID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgQ2xpZW50LnNldEFkbWluKHVzZXIudXNlcm5hbWUsICF1c2VyLmFkbWluLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICB1c2VyLmFkbWluID0gIXVzZXIuYWRtaW47XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9BZGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS51c2VyYWRkLmFscmVhZHlUYWtlbiA9ICcnO1xuICAgICAgICAkc2NvcGUudXNlcmFkZC5lcnJvci51c2VybmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS51c2VyYWRkLmVycm9yLmVtYWlsID0gbnVsbDtcblxuICAgICAgICBDbGllbnQuY3JlYXRlVXNlcigkc2NvcGUudXNlcmFkZC51c2VybmFtZSwgJHNjb3BlLnVzZXJhZGQuZW1haWwsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwOSkge1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VyYWRkLmFscmVhZHlUYWtlbiA9ICRzY29wZS51c2VybmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignVXNlcm5hbWUgYWxyZWFkeSB0YWtlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluZGV4T2YoJ2VtYWlsJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyYWRkLmVycm9yLmVtYWlsID0gJ0ludmFsaWQgRW1haWwnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmFkZC5lbWFpbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluZGV4T2YoJ3VzZXJuYW1lJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyYWRkLmVycm9yLnVzZXJuYW1lID0gJ0ludmFsaWQgVXNlcm5hbWUnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmFkZC51c2VybmFtZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNyZWF0ZSB1c2VyLicsIGVycm9yKTtcblxuICAgICAgICAgICAgcmVmcmVzaCgpO1xuICAgICAgICAgICAgJCgnI3VzZXJBZGRNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd1VzZXJSZW1vdmUgPSBmdW5jdGlvbiAodXNlckluZm8pIHtcbiAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUuZXJyb3IudXNlcm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS51c2VycmVtb3ZlLnVzZXJJbmZvID0gdXNlckluZm87XG4gICAgICAgICQoJyN1c2VyUmVtb3ZlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9Vc2VyUmVtb3ZlID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUuZXJyb3IudXNlcm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG5cbiAgICAgICAgaWYgKCRzY29wZS51c2VycmVtb3ZlLnVzZXJuYW1lICE9PSAkc2NvcGUudXNlcnJlbW92ZS51c2VySW5mby51c2VybmFtZSkge1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUuZXJyb3IudXNlcm5hbWUgPSAnVXNlcm5hbWUgZG9lcyBub3QgbWF0Y2gnO1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUudXNlcm5hbWUgPSAnJztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5yZW1vdmVVc2VyKCRzY29wZS51c2VycmVtb3ZlLnVzZXJJbmZvLmlkLCAkc2NvcGUudXNlcnJlbW92ZS5wYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUuZXJyb3IucGFzc3dvcmQgPSAnSW5jb3JyZWN0IHBhc3N3b3JkJztcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBkZWxldGUgdXNlci4nLCBlcnJvcik7XG5cbiAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLnVzZXJJbmZvID0ge307XG4gICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS51c2VybmFtZSA9ICcnO1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUucGFzc3dvcmQgPSAnJztcblxuICAgICAgICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXG4gICAgICAgICAgICAkKCcjdXNlclJlbW92ZU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAgICAgcmVmcmVzaCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgQ2xpZW50Lmxpc3RVc2VycyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGdldCB1c2VyIGxpc3RpbmcuJywgZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUudXNlcnMgPSByZXN1bHQudXNlcnM7XG4gICAgICAgICAgICAkc2NvcGUucmVhZHkgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZWZyZXNoKCk7XG5cbiAgICAvLyBzZXR1cCBhbGwgdGhlIGRpYWxvZyBmb2N1cyBoYW5kbGluZ1xuICAgIFsndXNlckFkZE1vZGFsJywgJ3VzZXJSZW1vdmVNb2RhbCddLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICQoJyMnICsgaWQpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZChcIlthdXRvZm9jdXNdOmZpcnN0XCIpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9