<% include header %>

<script>

'use strict';

// very basic angular app
var app = angular.module('Application', []);
app.controller('Controller', [function () {}]);

</script>

<center>
    <h1>Hello <%= user.username %> create a new password</h1>
</center>

<div class="container" ng-app="Application" ng-controller="Controller">
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <form action="/api/v1/session/password/reset" method="post" name="resetForm" autocomplete="off" role="form" novalidate>
                <input type="hidden" name="_csrf" value="<%= csrf %>"/>
                <input type="hidden" name="resetToken" value="<%= resetToken %>"/>

                <div class="form-group" ng-class="{ 'has-error': resetForm.password.$dirty && resetForm.password.$invalid }">
                    <label class="control-label" for="inputPassword">New Password</label>
                    <input type="password" class="form-control" id="inputPassword" ng-model="password" name="password" ng-maxlength="512" ng-minlength="5" autofocus required>
                </div>
                <div class="form-group" ng-class="{ 'has-error': resetForm.passwordRepeat.$dirty && (resetForm.passwordRepeat.$invalid || password !== passwordRepeat) }">
                    <label class="control-label" for="inputPasswordRepeat">Repeat Password</label>
                    <input type="password" class="form-control" id="inputPasswordRepeat" ng-model="passwordRepeat" name="passwordRepeat" required>
                </div>
                <input class="btn btn-primary btn-outline pull-right" type="submit" value="Create" ng-disabled="resetForm.$invalid || password !== passwordRepeat"/>
            </form>
        </div>
    </div>
</div>

<% include footer %>
